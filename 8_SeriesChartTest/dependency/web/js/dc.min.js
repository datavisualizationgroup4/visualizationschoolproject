/*!
 *  dc 3.0.12
 *  http://dc-js.github.io/dc.js/
 *  Copyright 2012-2019 Nick Zhu & the dc.js Developers
 *  https://github.com/dc-js/dc.js/blob/master/AUTHORS
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */

!function(){function t(nt,V){"use strict";var rt={version:"3.0.12",constants:{CHART_CLASS:"dc-chart",DEBUG_GROUP_CLASS:"debug",STACK_CLASS:"stack",DESELECTED_CLASS:"deselected",SELECTED_CLASS:"selected",NODE_INDEX_NAME:"__index__",GROUP_INDEX_NAME:"__group_index__",DEFAULT_CHART_GROUP:"__default_chart_group__",EVENT_DELAY:40,NEGLIGIBLE_NUMBER:1e-10},_renderlet:null};rt.chartRegistry=function(){var r={};function i(t){return t||(t=rt.constants.DEFAULT_CHART_GROUP),r[t]||(r[t]=[]),t}return{has:function(t){for(var e in r)if(0<=r[e].indexOf(t))return!0;return!1},register:function(t,e){e=i(e),r[e].push(t)},deregister:function(t,e){e=i(e);for(var n=0;n<r[e].length;n++)if(r[e][n].anchorName()===t.anchorName()){r[e].splice(n,1);break}},clear:function(t){t?delete r[t]:r={}},list:function(t){return t=i(t),r[t]}}}(),rt.registerChart=function(t,e){rt.chartRegistry.register(t,e)},rt.deregisterChart=function(t,e){rt.chartRegistry.deregister(t,e)},rt.hasChart=function(t){return rt.chartRegistry.has(t)},rt.deregisterAllCharts=function(t){rt.chartRegistry.clear(t)},rt.filterAll=function(t){for(var e=rt.chartRegistry.list(t),n=0;n<e.length;++n)e[n].filterAll()},rt.refocusAll=function(t){for(var e=rt.chartRegistry.list(t),n=0;n<e.length;++n)e[n].focus&&e[n].focus()},rt.renderAll=function(t){for(var e=rt.chartRegistry.list(t),n=0;n<e.length;++n)e[n].render();null!==rt._renderlet&&rt._renderlet(t)},rt.redrawAll=function(t){for(var e=rt.chartRegistry.list(t),n=0;n<e.length;++n)e[n].redraw();null!==rt._renderlet&&rt._renderlet(t)},rt.disableTransitions=!1,rt.transition=function(t,e,n,r){if(rt.disableTransitions||e<=0)return t;var i=t.transition(r);return(0<=e||void 0!==e)&&(i=i.duration(e)),(0<=n||void 0!==n)&&(i=i.delay(n)),i},rt.optionalTransition=function(t,e,n,r){return t?function(t){return rt.transition(t,e,n,r)}:function(t){return t}},rt.afterTransition=function(t,e){if(t.empty()||!t.duration)e.call(t);else{var n=0;t.each(function(){++n}).on("end",function(){--n||e.call(t)})}},rt.units={},rt.units.integers=function(t,e){return Math.abs(e-t)},rt.units.ordinal=function(){throw new Error("dc.units.ordinal should not be called - it is a placeholder")},rt.units.fp={},rt.units.fp.precision=function(t){var r=function(t,e){var n=Math.abs((e-t)/r.resolution);return rt.utils.isNegligible(n-Math.floor(n))?Math.floor(n):Math.ceil(n)};return r.resolution=t,r},rt.round={},rt.round.floor=function(t){return Math.floor(t)},rt.round.ceil=function(t){return Math.ceil(t)},rt.round.round=function(t){return Math.round(t)},rt.override=function(t,e,n){var r=t[e];t["_"+e]=r,t[e]=n},rt.renderlet=function(t){return arguments.length?(rt._renderlet=t,rt):rt._renderlet},rt.instanceOfChart=function(t){return t instanceof Object&&t.__dcFlag__&&!0},Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=e.length;0<=--n&&e.item(n)!==this;);return-1<n}),rt.errors={},rt.errors.Exception=function(t){var e=t||"Unexpected internal error";this.message=e,this.toString=function(){return e},this.stack=(new Error).stack},rt.errors.Exception.prototype=Object.create(Error.prototype),rt.errors.Exception.prototype.constructor=rt.errors.Exception,rt.errors.InvalidStateException=function(){rt.errors.Exception.apply(this,arguments)},rt.errors.InvalidStateException.prototype=Object.create(rt.errors.Exception.prototype),rt.errors.InvalidStateException.prototype.constructor=rt.errors.InvalidStateException,rt.errors.BadArgumentException=function(){rt.errors.Exception.apply(this,arguments)},rt.errors.BadArgumentException.prototype=Object.create(rt.errors.Exception.prototype),rt.errors.BadArgumentException.prototype.constructor=rt.errors.BadArgumentException,rt.dateFormat=nt.timeFormat("%m/%d/%Y"),rt.printers={},rt.printers.filters=function(t){for(var e="",n=0;n<t.length;++n)0<n&&(e+=", "),e+=rt.printers.filter(t[n]);return e},rt.printers.filter=function(t){var e="";return null!=t&&(t instanceof Array?2<=t.length?e="["+t.map(function(t){return rt.utils.printSingleValue(t)}).join(" -> ")+"]":1<=t.length&&(e=rt.utils.printSingleValue(t[0])):e=rt.utils.printSingleValue(t)),e},rt.pluck=function(n,r){return r?function(t,e){return r.call(t,t[n],e)}:function(t){return t[n]}},rt.utils={},rt.utils.printSingleValue=function(t){var e=""+t;return t instanceof Date?e=rt.dateFormat(t):"string"==typeof t?e=t:rt.utils.isFloat(t)?e=rt.utils.printSingleValue.fformat(t):rt.utils.isInteger(t)&&(e=Math.round(t)),e},rt.utils.printSingleValue.fformat=nt.format(".2f"),rt.utils.toTimeFunc=function(t){return"time"+t.charAt(0).toUpperCase()+t.slice(1)},rt.utils.add=function(t,e,n){if("string"==typeof e&&(e=e.replace("%","")),t instanceof Date)return"string"==typeof e&&(e=+e),"millis"===n?new Date(t.getTime()+e):("function"!=typeof(n=n||nt.timeDay)&&(n=nt[rt.utils.toTimeFunc(n)]),n.offset(t,e));if("string"!=typeof e)return t+e;var r=+e/100;return 0<t?t*(1+r):t*(1-r)},rt.utils.subtract=function(t,e,n){if("string"==typeof e&&(e=e.replace("%","")),t instanceof Date)return"string"==typeof e&&(e=+e),"millis"===n?new Date(t.getTime()-e):("function"!=typeof(n=n||nt.timeDay)&&(n=nt[rt.utils.toTimeFunc(n)]),n.offset(t,-e));if("string"!=typeof e)return t-e;var r=+e/100;return t<0?t*(1+r):t*(1-r)},rt.utils.isNumber=function(t){return t===+t},rt.utils.isFloat=function(t){return t===+t&&t!==(0|t)},rt.utils.isInteger=function(t){return t===+t&&t===(0|t)},rt.utils.isNegligible=function(t){return!rt.utils.isNumber(t)||t<rt.constants.NEGLIGIBLE_NUMBER&&t>-rt.constants.NEGLIGIBLE_NUMBER},rt.utils.clamp=function(t,e,n){return t<e?e:n<t?n:t},rt.utils.constant=function(t){return function(){return t}};var r,e,n,i,a,t=0;function h(t,e){for(var n=0;n<t.length;n++)if(t[n].key===e)return t[n]}return rt.utils.uniqueId=function(){return++t},rt.utils.nameToId=function(t){return t.toLowerCase().replace(/[\s]/g,"_").replace(/[\.']/g,"")},rt.utils.appendOrSelect=function(t,e,n){n=n||e;var r=t.select(e);return r.empty()&&(r=t.append(n)),r},rt.utils.safeNumber=function(t){return rt.utils.isNumber(+t)?+t:0},rt.utils.arraysEqual=function(t,n){return!t&&!n||!(!t||!n)&&(t.length===n.length&&t.every(function(t,e){return t.valueOf()===n[e].valueOf()}))},rt.utils.allChildren=function(t){var e=[];if(e.push(t.path),console.log("currentNode",t),t.children)for(var n=0;n<t.children.length;n++)e=e.concat(rt.utils.allChildren(t.children[n]));return e},rt.utils.toHierarchy=function(t,e){for(var n={key:"root",children:[]},r=0;r<t.length;r++)for(var i=t[r],a=i.key,o=e(i),l=n,u=0;u<a.length;u++){var c,s=a.slice(0,u+1),d=l.children,f=a[u];u+1<a.length?(void 0===(c=h(d,f))&&(c={key:f,children:[],path:s},d.push(c)),l=c):(c={key:f,value:o,data:i,path:s},d.push(c))}return n},rt.utils.getAncestors=function(t){for(var e=[],n=t;n.parent;)e.unshift(n.name),n=n.parent;return e},rt.utils.arraysIdentical=function(t,e){var n=t.length;if(n!==e.length)return!1;for(;n--;)if(t[n]!==e[n])return!1;return!0},"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null===t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1;r<arguments.length;r++){var i=arguments[r];if(null!==i)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])}return n},writable:!0,configurable:!0}),rt.logger=((r={enableDebugLog:!(e={}),warn:function(t){return console&&(console.warn?console.warn(t):console.log&&console.log(t)),r}}).warnOnce=function(t){return e[t]||(e[t]=!0,rt.logger.warn(t)),r},r.debug=function(t){return r.enableDebugLog&&console&&(console.debug?console.debug(t):console.log&&console.log(t)),r},r.deprecate=function(t,e){var n=!1;return function(){return n||(r.warn(e),n=!0),t.apply(this,arguments)}},r.annotate=function(t,e){var n=!1;return function(){return n||(console.groupCollapsed(e),console.trace(),console.groupEnd(),n=!0),t.apply(this,arguments)}},r),rt.config=(a=i=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"],(n={}).defaultColors=function(t){return arguments.length?(a=t,n):(a===i&&rt.logger.warnOnce("You are using d3.schemeCategory20c, which has been removed in D3v5. See the explanation at https://github.com/d3/d3/blob/master/CHANGES.md#changes-in-d3-50. DC is using it for backward compatibility, however it will be changed in DCv3.1. You can change it by calling dc.config.defaultColors(newScheme). See https://github.com/d3/d3-scale-chromatic for some alternatives."),a)},n),rt.events={current:null},rt.events.trigger=function(t,e){e?(rt.events.current=t,setTimeout(function(){t===rt.events.current&&t()},e)):t()},rt.filters={},rt.filters.RangedFilter=function(t,e){var n=new Array(t,e);return n.isFiltered=function(t){return t>=this[0]&&t<this[1]},n.filterType="RangedFilter",n},rt.filters.TwoDimensionalFilter=function(t){if(null===t)return null;var e=t;return e.isFiltered=function(t){return t.length&&t.length===e.length&&t[0]===e[0]&&t[1]===e[1]},e.filterType="TwoDimensionalFilter",e},rt.filters.RangedTwoDimensionalFilter=function(t){if(null===t)return null;var r,e=t;return r=e[0]instanceof Array?[[Math.min(t[0][0],t[1][0]),Math.min(t[0][1],t[1][1])],[Math.max(t[0][0],t[1][0]),Math.max(t[0][1],t[1][1])]]:[[t[0],-1/0],[t[1],1/0]],e.isFiltered=function(t){var e,n;return n=t instanceof Array?(e=t[0],t[1]):(e=t,r[0][1]),e>=r[0][0]&&e<r[1][0]&&n>=r[0][1]&&n<r[1][1]},e.filterType="RangedTwoDimensionalFilter",e},rt.filters.HierarchyFilter=function(t){if(null===t)return null;var n=t.slice(0);return n.isFiltered=function(t){if(!(n.length&&t&&t.length&&t.length>=n.length))return!1;for(var e=0;e<n.length;e++)if(t[e]!==n[e])return!1;return!0},n},rt.baseMixin=function(r){var e,n,i,a,o,l;r.__dcFlag__=rt.utils.uniqueId();var u,c,s,d,f,h=200,g=function(t){var e=t&&t.getBoundingClientRect&&t.getBoundingClientRect().width;return e&&h<e?e:h},p=g,y=200,m=function(t){var e=t&&t.getBoundingClientRect&&t.getBoundingClientRect().height;return e&&y<e?e:y},v=m,x=!1,A=rt.pluck("key"),b=rt.pluck("value"),_=rt.pluck("key"),k=rt.pluck("key"),D=!1,w=function(t){return r.keyAccessor()(t)+": "+r.valueAccessor()(t)},C=!0,L=!1,S=750,E=0,R=rt.printers.filters,M=["dimension","group"],O=rt.constants.DEFAULT_CHART_GROUP,T=nt.dispatch("preRender","postRender","preRedraw","postRedraw","filtered","zoomed","renderlet","pretransition"),B=[],F=function(t,r){return 0===r.length?t.filter(null):1!==r.length||r[0].isFiltered?1===r.length&&"RangedFilter"===r[0].filterType?t.filterRange(r[0]):t.filterFunction(function(t){for(var e=0;e<r.length;e++){var n=r[e];if(n.isFiltered&&n.isFiltered(t))return!0;if(n<=t&&t<=n)return!0}return!1}):t.filterExact(r[0]),r},N=function(t){return t.all()};function H(){o&&(x?o.attr("viewBox")||o.attr("viewBox","0 0 "+r.width()+" "+r.height()):o.attr("width",r.width()).attr("height",r.height()))}function G(t){if(!r[t]||!r[t]())throw new rt.errors.InvalidStateException("Mandatory attribute chart."+t+" is missing on chart[#"+r.anchorName()+"]")}r.height=function(t){return arguments.length?(v=t?"function"==typeof t?t:rt.utils.constant(t):m,c=void 0,r):(rt.utils.isNumber(c)||(c=v(a.node())),c)},r.width=function(t){return arguments.length?(p=t?"function"==typeof t?t:rt.utils.constant(t):g,u=void 0,r):(rt.utils.isNumber(u)||(u=p(a.node())),u)},r.minWidth=function(t){return arguments.length?(h=t,r):h},r.minHeight=function(t){return arguments.length?(y=t,r):y},r.useViewBoxResizing=function(t){return arguments.length?(x=t,r):x},r.dimension=function(t){return arguments.length?(e=t,r.expireCache(),r):e},r.data=function(t){return arguments.length?(N="function"==typeof t?t:rt.utils.constant(t),r.expireCache(),r):N.call(r,n)},r.group=function(t,e){return arguments.length?(n=t,r._groupName=e,r.expireCache(),r):n},r.ordering=function(t){return arguments.length?(k=t,s=V.quicksort.by(k),r.expireCache(),r):k},r._computeOrderedGroups=function(t){var e=t.slice(0);return e.length<=1?e:(s||(s=V.quicksort.by(k)),s(e,0,e.length))},r.filterAll=function(){return r.filter(null)},r.select=function(t){return a.select(t)},r.selectAll=function(t){return a?a.selectAll(t):null},r.anchor=function(t,e){if(!arguments.length)return i;if(rt.instanceOfChart(t))(i=t.anchor()).children&&(i="#"+t.anchorName()),a=t.root(),l=!0;else{if(!t)throw new rt.errors.BadArgumentException("parent must be defined");i=t.select&&t.classed?t.node():t,(a=nt.select(i)).classed(rt.constants.CHART_CLASS,!0),rt.registerChart(r,e),l=!1}return O=e,r},r.anchorName=function(){var t=r.anchor();return t&&t.id?t.id:t&&t.replace?t.replace("#",""):"dc-chart"+r.chartID()},r.root=function(t){return arguments.length?(a=t,r):a},r.svg=function(t){return arguments.length?(o=t,r):o},r.resetSvg=function(){return r.select("svg").remove(),o=r.root().append("svg"),H(),o},r.filterPrinter=function(t){return arguments.length?(R=t,r):R},r.controlsUseVisibility=function(t){return arguments.length?(L=t,r):L},r.turnOnControls=function(){if(a){var t=r.controlsUseVisibility()?"visibility":"display";r.selectAll(".reset").style(t,null),r.selectAll(".filter").text(R(r.filters())).style(t,null)}return r},r.turnOffControls=function(){if(a){var t=r.controlsUseVisibility()?"visibility":"display",e=r.controlsUseVisibility()?"hidden":"none";r.selectAll(".reset").style(t,e),r.selectAll(".filter").style(t,e).text(r.filter())}return r},r.transitionDuration=function(t){return arguments.length?(S=t,r):S},r.transitionDelay=function(t){return arguments.length?(E=t,r):E},r._mandatoryAttributes=function(t){return arguments.length?(M=t,r):M},r.render=function(){c=u=void 0,T.call("preRender",r,r),M&&M.forEach(G);var t=r._doRender();return d&&d.render(),r._activateRenderlets("postRender"),t},r._activateRenderlets=function(t){T.call("pretransition",r,r),0<r.transitionDuration()&&o?o.transition().duration(r.transitionDuration()).delay(r.transitionDelay()).on("end",function(){T.call("renderlet",r,r),t&&T.call(t,r,r)}):(T.call("renderlet",r,r),t&&T.call(t,r,r))},r.redraw=function(){H(),T.call("preRedraw",r,r);var t=r._doRedraw();return d&&d.render(),r._activateRenderlets("postRedraw"),t},r.commitHandler=function(t){return arguments.length?(f=t,r):f},r.redrawGroup=function(){return f?f(!1,function(t,e){t?console.log(t):rt.redrawAll(r.chartGroup())}):rt.redrawAll(r.chartGroup()),r},r.renderGroup=function(){return f?f(!1,function(t,e){t?console.log(t):rt.renderAll(r.chartGroup())}):rt.renderAll(r.chartGroup()),r},r._invokeFilteredListener=function(t){void 0!==t&&T.call("filtered",r,r,t)},r._invokeZoomedListener=function(){T.call("zoomed",r,r)};var P=function(t,e){return null==e?0<t.length:t.some(function(t){return e<=t&&t<=e})};r.hasFilterHandler=function(t){return arguments.length?(P=t,r):P},r.hasFilter=function(t){return P(B,t)};var U=function(t,e){for(var n=0;n<t.length;n++)if(t[n]<=e&&t[n]>=e){t.splice(n,1);break}return t};r.removeFilterHandler=function(t){return arguments.length?(U=t,r):U};var Y=function(t,e){return t.push(e),t};r.addFilterHandler=function(t){return arguments.length?(Y=t,r):Y};var z=function(t){return[]};return r.resetFilterHandler=function(t){return arguments.length?(z=t,r):z},r.replaceFilter=function(t){return B=z(B),r.filter(t),r},r.filter=function(t){if(!arguments.length)return 0<B.length?B[0]:null;var e=B;return t instanceof Array&&t[0]instanceof Array&&!t.isFiltered?t[0].forEach(function(t){e=P(e,t)?U(e,t):Y(e,t)}):e=null===t?z(e):P(e,t)?U(e,t):Y(e,t),B=function(t){if(r.dimension()&&r.dimension().filter){var e=F(r.dimension(),t);e&&(t=e)}return t}(e),r._invokeFilteredListener(t),null!==a&&r.hasFilter()?r.turnOnControls():r.turnOffControls(),r},r.filters=function(){return B},r.highlightSelected=function(t){nt.select(t).classed(rt.constants.SELECTED_CLASS,!0),nt.select(t).classed(rt.constants.DESELECTED_CLASS,!1)},r.fadeDeselected=function(t){nt.select(t).classed(rt.constants.SELECTED_CLASS,!1),nt.select(t).classed(rt.constants.DESELECTED_CLASS,!0)},r.resetHighlight=function(t){nt.select(t).classed(rt.constants.SELECTED_CLASS,!1),nt.select(t).classed(rt.constants.DESELECTED_CLASS,!1)},r.onClick=function(t){var e=r.keyAccessor()(t);rt.events.trigger(function(){r.filter(e),r.redrawGroup()})},r.filterHandler=function(t){return arguments.length?(F=t,r):F},r._doRender=function(){return r},r._doRedraw=function(){return r},r.legendables=function(){return[]},r.legendHighlight=function(){},r.legendReset=function(){},r.legendToggle=function(){},r.isLegendableHidden=function(){return!1},r.keyAccessor=function(t){return arguments.length?(A=t,r):A},r.valueAccessor=function(t){return arguments.length?(b=t,r):b},r.label=function(t,e){return arguments.length?(_=t,(void 0===e||e)&&(D=!0),r):_},r.renderLabel=function(t){return arguments.length?(D=t,r):D},r.title=function(t){return arguments.length?(w=t,r):w},r.renderTitle=function(t){return arguments.length?(C=t,r):C},r.renderlet=rt.logger.deprecate(function(t){return r.on("renderlet."+rt.utils.uniqueId(),t),r},'chart.renderlet has been deprecated.  Please use chart.on("renderlet.<renderletKey>", renderletFunction)'),r.chartGroup=function(t){return arguments.length?(l||rt.deregisterChart(r,O),O=t,l||rt.registerChart(r,O),r):O},r.expireCache=function(){return r},r.legend=function(t){return arguments.length?((d=t).parent(r),r):d},r.chartID=function(){return r.__dcFlag__},r.options=function(t){var e=["anchor","group","xAxisLabel","yAxisLabel","stack","title","point","getColor","overlayGeoJson"];for(var n in t)"function"==typeof r[n]?t[n]instanceof Array&&-1!==e.indexOf(n)?r[n].apply(r,t[n]):r[n].call(r,t[n]):rt.logger.debug("Not a valid option setter name: "+n);return r},r.on=function(t,e){return T.on(t,e),r},r},rt.marginMixin=function(e){var n={top:10,right:50,bottom:30,left:30};return e.margins=function(t){return arguments.length?(n=t,e):n},e.effectiveWidth=function(){return e.width()-e.margins().left-e.margins().right},e.effectiveHeight=function(){return e.height()-e.margins().top-e.margins().bottom},e},rt.colorMixin=function(e){var n,r=nt.scaleOrdinal(rt.config.defaultColors()),i=!0,a=function(t){return e.keyAccessor()(t)};return e.colors=function(t){return arguments.length?(r=t instanceof Array?nt.scaleQuantize().range(t):"function"==typeof t?t:rt.utils.constant(t),e):r},e.ordinalColors=function(t){return e.colors(nt.scaleOrdinal().range(t))},e.linearColors=function(t){return e.colors(nt.scaleLinear().range(t).interpolate(nt.interpolateHcl))},e.colorAccessor=function(t){return arguments.length?(a=t,i=!1,e):a},e.defaultColorAccessor=function(){return i},e.colorDomain=function(t){return arguments.length?(r.domain(t),e):r.domain()},e.calculateColorDomain=function(){var t=[nt.min(e.data(),e.colorAccessor()),nt.max(e.data(),e.colorAccessor())];return r.domain(t),e},e.getColor=function(t,e){return n?n.call(this,t,e):r(a.call(this,t,e))},e.colorCalculator=function(t){return arguments.length?(n=t,e):n||e.getColor},e},rt.coordinateGridMixin=function(l){var i,n,r,a,o,u,c="grid-line",s="horizontal",d="vertical",f="y-axis-label",h="x-axis-label",g="custom-brush-handle";(l=rt.colorMixin(rt.marginMixin(rt.baseMixin(l)))).colors(nt.scaleOrdinal(nt.schemeCategory10)),l._mandatoryAttributes().push("x");var p,y,m,v,x,e,t,A,b,_=nt.axisBottom(),k=rt.units.integers,D=0,w=nt.timeDay,C=!1,L=0,S=null,E=0,R=!1,M=0,O=nt.brushX(),T=!0,B=!1,F=!1,N=!1,H=!1,G=[1,1/0],P=!0,U=nt.zoom().on("zoom",function(){if(!nt.event.sourceEvent)return;if(nt.event.sourceEvent.type&&-1!==["start","zoom","end"].indexOf(nt.event.sourceEvent.type))return;var t=nt.event.transform.rescaleX(o).domain();l.focus(t,!1)}),Y=nt.zoom().on("zoom",null),z=!1,V=!1,I=0,j=.5,X=0,q=!1;function W(t,e){l.isOrdinal()?(a.bandwidth||(rt.logger.warn("For compatibility with d3v4+, dc.js d3.0 ordinal bar/line/bubble charts need d3.scaleBand() for the x scale, instead of d3.scaleOrdinal(). Replacing .x() with a d3.scaleBand with the same domain - make the same change in your code to avoid this warning!"),a=nt.scaleBand().domain(a.domain())),(l.elasticX()||0===a.domain().length)&&a.domain(l._ordinalXDomain())):l.elasticX()&&a.domain([l.xAxisMin(),l.xAxisMax()]);var n=a.domain();!e&&rt.utils.arraysEqual(y,n)||l.rescale(),y=n,l.isOrdinal()?a.range([0,l.xAxisLength()]).paddingInner(X).paddingOuter(l._useOuterPadding()?j:0):a.range([0,l.xAxisLength()]),_=_.scale(l.x()),function(t){var e=t.select("g."+d);if(N){e.empty()&&(e=t.insert("g",":first-child").attr("class",c+" "+d).attr("transform","translate("+l.margins().left+","+l.margins().top+")"));var n=_.tickValues()?_.tickValues():"function"==typeof a.ticks?a.ticks.apply(a,_.tickArguments()):a.domain(),r=e.selectAll("line").data(n),i=r.enter().append("line").attr("x1",function(t){return a(t)}).attr("y1",l._xAxisY()-l.margins().top).attr("x2",function(t){return a(t)}).attr("y2",0).attr("opacity",0);rt.transition(i,l.transitionDuration(),l.transitionDelay()).attr("opacity",.5),rt.transition(r,l.transitionDuration(),l.transitionDelay()).attr("x1",function(t){return a(t)}).attr("y1",l._xAxisY()-l.margins().top).attr("x2",function(t){return a(t)}).attr("y2",0),r.exit().remove()}else e.selectAll("line").remove()}(t)}function K(){return q?nt.axisRight():nt.axisLeft()}function Z(){return l.anchorName().replace(/[ .#=\[\]"]/g,"-")+"-clip"}function J(){var t=rt.utils.appendOrSelect(i,"defs"),e=Z(),n=rt.utils.appendOrSelect(t,"#"+e,"clipPath").attr("id",e),r=2*I;rt.utils.appendOrSelect(n,"rect").attr("width",l.xAxisLength()+r).attr("height",l.yAxisHeight()+r).attr("transform","translate(-"+I+", -"+I+")")}function Q(t){l.isOrdinal()&&(T=!1),W(l.g(),t),l._prepareYAxis(l.g()),l.plotData(),(l.elasticX()||H||t)&&l.renderXAxis(l.g()),(l.elasticY()||H||t)&&l.renderYAxis(l.g()),t?l.renderBrush(l.g(),!1):l.redrawBrush(l.filter(),H),l.fadeDeselectedArea(l.filter()),H=!1}function $(t,e){var n,r;n=(r=t)instanceof Array&&1<r.length?(l.x().domain(t),rt.filters.RangedFilter(t[0],t[1])):(l.x().domain(u),null),l.replaceFilter(n),l.rescale(),l.redraw(),e||(A&&!rt.utils.arraysEqual(l.filter(),A.filter())&&rt.events.trigger(function(){A.replaceFilter(n),A.redraw()}),l._invokeZoomedListener(),rt.events.trigger(function(){l.redrawGroup()},rt.constants.EVENT_DELAY))}function tt(){var t,e,n,r,i;U&&U.transform(l.root(),(t=l.x().domain(),n=o,r=((e=u)[1]-e[0])/(t[1]-t[0]),i=-1*n(t[0]),nt.zoomIdentity.scale(r).translate(i,0)))}function et(t,e){return t&&2===t.length&&e&&2===e.length?((t[0]>e[1]||t[1]<e[0])&&console.warn("Could not intersect extents, will reset"),[t[0]>e[0]?t[0]:e[0],t[1]<e[1]?t[1]:e[1]]):t}return l.rescale=function(){return H=!(t=void 0),l},l.resizing=function(){return H},l.rangeChart=function(t){return arguments.length?((A=t).focusChart(l),l):A},l.zoomScale=function(t){return arguments.length?(G=t,l):G},l.zoomOutRestrict=function(t){return arguments.length?(P=t,l):P},l._generateG=function(t){i=void 0===t?l.svg():t;var e=window.location.href.split("#")[0];return n=i.append("g"),r=n.append("g").attr("class","chart-body").attr("transform","translate("+l.margins().left+", "+l.margins().top+")").attr("clip-path","url("+e+"#"+Z()+")"),n},l.g=function(t){return arguments.length?(n=t,l):n},l.mouseZoomable=function(t){return arguments.length?(V=t,l):V},l.chartBodyG=function(t){return arguments.length?(r=t,l):r},l.x=function(t){return arguments.length?(u=(a=t).domain(),l.rescale(),l):a},l.xOriginalDomain=function(){return u},l.xUnits=function(t){return arguments.length?(k=t,l):k},l.xAxis=function(t){return arguments.length?(_=t,l):_},l.elasticX=function(t){return arguments.length?(C=t,l):C},l.xAxisPadding=function(t){return arguments.length?(D=t,l):D},l.xAxisPaddingUnit=function(t){return arguments.length?(w=t,l):w},l.xUnitCount=function(){return void 0===t&&(l.isOrdinal()?t=l.x().domain().length:(t=l.xUnits()(l.x().domain()[0],l.x().domain()[1]))instanceof Array&&(t=t.length)),t},l.useRightYAxis=function(t){return arguments.length?(q!==t&&S&&rt.logger.warn("Value of useRightYAxis has been altered, after yAxis was created. You might get unexpected yAxis behavior. Make calls to useRightYAxis sooner in your chart creation process."),q=t,l):q},l.isOrdinal=function(){return l.xUnits()===rt.units.ordinal},l._useOuterPadding=function(){return!0},l._ordinalXDomain=function(){return l._computeOrderedGroups(l.data()).map(l.keyAccessor())},l.renderXAxis=function(t){var e=t.select("g.x");e.empty()&&(e=t.append("g").attr("class","axis x").attr("transform","translate("+l.margins().left+","+l._xAxisY()+")"));var n=t.select("text."+h);n.empty()&&l.xAxisLabel()&&(n=t.append("text").attr("class",h).attr("transform","translate("+(l.margins().left+l.xAxisLength()/2)+","+(l.height()-L)+")").attr("text-anchor","middle")),l.xAxisLabel()&&n.text()!==l.xAxisLabel()&&n.text(l.xAxisLabel()),rt.transition(e,l.transitionDuration(),l.transitionDelay()).attr("transform","translate("+l.margins().left+","+l._xAxisY()+")").call(_),rt.transition(n,l.transitionDuration(),l.transitionDelay()).attr("transform","translate("+(l.margins().left+l.xAxisLength()/2)+","+(l.height()-L)+")")},l._xAxisY=function(){return l.height()-l.margins().bottom},l.xAxisLength=function(){return l.effectiveWidth()},l.xAxisLabel=function(t,e){return arguments.length?(p=t,l.margins().bottom-=L,L=void 0===e?12:e,l.margins().bottom+=L,l):p},l._prepareYAxis=function(t){if(void 0===m||l.elasticY()){void 0===m&&(m=nt.scaleLinear());var e=l.yAxisMin()||0,n=l.yAxisMax()||0;m.domain([e,n]).rangeRound([l.yAxisHeight(),0])}m.range([l.yAxisHeight(),0]),S||(S=K()),S.scale(m),l._renderHorizontalGridLinesForAxis(t,m,S)},l.renderYAxisLabel=function(t,e,n,r){r=r||M;var i=l.g().select("text."+f+"."+t+"-label"),a=l.margins().top+l.yAxisHeight()/2;i.empty()&&e&&(i=l.g().append("text").attr("transform","translate("+r+","+a+"),rotate("+n+")").attr("class",f+" "+t+"-label").attr("text-anchor","middle").text(e)),e&&i.text()!==e&&i.text(e),rt.transition(i,l.transitionDuration(),l.transitionDelay()).attr("transform","translate("+r+","+a+"),rotate("+n+")")},l.renderYAxisAt=function(t,e,n){var r=l.g().select("g."+t);r.empty()&&(r=l.g().append("g").attr("class","axis "+t).attr("transform","translate("+n+","+l.margins().top+")")),rt.transition(r,l.transitionDuration(),l.transitionDelay()).attr("transform","translate("+n+","+l.margins().top+")").call(e)},l.renderYAxis=function(){var t=q?l.width()-l.margins().right:l._yAxisX();l.renderYAxisAt("y",S,t);var e=q?l.width()-M:M,n=q?90:-90;l.renderYAxisLabel("y",l.yAxisLabel(),n,e)},l._renderHorizontalGridLinesForAxis=function(t,e,n){var r=t.select("g."+s);if(F){var i=n.tickValues()?n.tickValues():e.ticks?e.ticks.apply(e,n.tickArguments()):e.domain();r.empty()&&(r=t.insert("g",":first-child").attr("class",c+" "+s).attr("transform","translate("+l.margins().left+","+l.margins().top+")"));var a=r.selectAll("line").data(i),o=a.enter().append("line").attr("x1",1).attr("y1",function(t){return e(t)}).attr("x2",l.xAxisLength()).attr("y2",function(t){return e(t)}).attr("opacity",0);rt.transition(o,l.transitionDuration(),l.transitionDelay()).attr("opacity",.5),rt.transition(a,l.transitionDuration(),l.transitionDelay()).attr("x1",1).attr("y1",function(t){return e(t)}).attr("x2",l.xAxisLength()).attr("y2",function(t){return e(t)}),a.exit().remove()}else r.selectAll("line").remove()},l._yAxisX=function(){return l.useRightYAxis()?l.width()-l.margins().right:l.margins().left},l.yAxisLabel=function(t,e){return arguments.length?(v=t,l.margins().left-=M,M=void 0===e?12:e,l.margins().left+=M,l):v},l.y=function(t){return arguments.length?(m=t,l.rescale(),l):m},l.yAxis=function(t){return arguments.length?(S=t,l):(S||(S=K()),S)},l.elasticY=function(t){return arguments.length?(R=t,l):R},l.renderHorizontalGridLines=function(t){return arguments.length?(F=t,l):F},l.renderVerticalGridLines=function(t){return arguments.length?(N=t,l):N},l.xAxisMin=function(){var t=nt.min(l.data(),function(t){return l.keyAccessor()(t)});return rt.utils.subtract(t,D,w)},l.xAxisMax=function(){var t=nt.max(l.data(),function(t){return l.keyAccessor()(t)});return rt.utils.add(t,D,w)},l.yAxisMin=function(){var t=nt.min(l.data(),function(t){return l.valueAccessor()(t)});return rt.utils.subtract(t,E)},l.yAxisMax=function(){var t=nt.max(l.data(),function(t){return l.valueAccessor()(t)});return rt.utils.add(t,E)},l.yAxisPadding=function(t){return arguments.length?(E=t,l):E},l.yAxisHeight=function(){return l.effectiveHeight()},l.round=function(t){return arguments.length?(e=t,l):e},l._rangeBandPadding=function(t){return arguments.length?(X=t,l):X},l._outerRangeBandPadding=function(t){return arguments.length?(j=t,l):j},rt.override(l,"filter",function(t){return arguments.length?(l._filter(t),l.redrawBrush(t,!1),l):l._filter()}),l.brush=function(t){return arguments.length?(O=t,l):O},l.renderBrush=function(t,e){T&&(O.on("start brush end",l._brushing),x=t.append("g").attr("class","brush").attr("transform","translate("+l.margins().left+","+l.margins().top+")"),l.setBrushExtents(),l.createBrushHandlePaths(x,e),l.redrawBrush(l.filter(),e))},l.createBrushHandlePaths=function(t){var e=t.selectAll("path."+g).data([{type:"w"},{type:"e"}]);(e=e.enter().append("path").attr("class",g).merge(e)).attr("d",l.resizeHandlePath)},l.extendBrush=function(t){return t&&l.round()&&(t[0]=l.round()(t[0]),t[1]=l.round()(t[1])),t},l.brushIsEmpty=function(t){return!t||t[1]<=t[0]},l._brushing=function(){if(nt.event.sourceEvent&&(!nt.event.sourceEvent.type||-1===["start","brush","end"].indexOf(nt.event.sourceEvent.type))){var t=nt.event.selection;t&&(t=t.map(l.x().invert)),t=l.extendBrush(t),l.redrawBrush(t,!1);var e=l.brushIsEmpty(t)?null:rt.filters.RangedFilter(t[0],t[1]);rt.events.trigger(function(){l.applyBrushSelection(e)},rt.constants.EVENT_DELAY)}},l.applyBrushSelection=function(t){l.replaceFilter(t),l.redrawGroup()},l.setBrushExtents=function(t){O.extent([[0,0],[l.effectiveWidth(),l.effectiveHeight()]]),x.call(O)},l.redrawBrush=function(n,t){if(T&&x)if(H&&l.setBrushExtents(t),n){var e=[a(n[0]),a(n[1])],r=rt.optionalTransition(t,l.transitionDuration(),l.transitionDelay())(x);r.call(O.move,e),r.selectAll("path."+g).attr("display",null).attr("transform",function(t,e){return"translate("+a(n[e])+", 0)"}).attr("d",l.resizeHandlePath)}else x.call(O.move,null),x.selectAll("path."+g).attr("display","none");l.fadeDeselectedArea(n)},l.fadeDeselectedArea=function(t){},l.resizeHandlePath=function(t){var e=+("e"===(t=t.type)),n=e?1:-1,r=l.effectiveHeight()/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)},l.clipPadding=function(t){return arguments.length?(I=t,l):I},l._preprocessData=function(){},l._doRender=function(){return l.resetSvg(),l._preprocessData(),l._generateG(),J(),Q(!0),o=a.copy(),V?l._enableMouseZoom():z&&l._disableMouseZoom(),l},l._doRedraw=function(){return l._preprocessData(),Q(!1),J(),l},l._enableMouseZoom=function(){z=!0;var t=[[0,0],[l.effectiveWidth(),l.effectiveHeight()]];if(U.scaleExtent(G).extent(t).duration(l.transitionDuration()),P){var e=Math.max(G[0],1);U.translateExtent(t).scaleExtent([e,G[1]])}l.root().call(U),tt()},l._disableMouseZoom=function(){l.root().call(Y)},l.focus=function(t,e){P&&(t=et(t,u),A&&(t=et(t,A.x().domain()))),$(t,e),tt()},l.refocused=function(){return!rt.utils.arraysEqual(l.x().domain(),u)},l.focusChart=function(t){return arguments.length?(b=t,l.on("filtered.dcjs-range-chart",function(t){t.filter()?rt.utils.arraysEqual(t.filter(),b.filter())||rt.events.trigger(function(){b.focus(t.filter(),!0)}):rt.events.trigger(function(){b.x().domain(b.xOriginalDomain(),!0)})}),l):b},l.brushOn=function(t){return arguments.length?(T=t,l):T},l.parentBrushOn=function(t){return arguments.length?(B=t,l):B},l.gBrush=function(){return x},l},rt.stackMixin=function(i){function n(n,t){var r=n.accessor||i.valueAccessor();n.name=String(n.name||t);var e=n.group.all().map(function(t,e){return{x:i.keyAccessor()(t,e),y:n.hidden?null:r(t,e),data:t,layer:n.name,hidden:n.hidden}});n.domainValues=e.filter(function(){if(!i.x())return rt.utils.constant(!0);var e=i.x().domain();if(i.isOrdinal())return function(){return!0};if(i.elasticX())return function(){return!0};return function(t){return t.x>=e[0]&&t.x<=e[e.length-1]}}()),n.values=i.evadeDomainFilter()?e:n.domainValues}var e=nt.stack(),a=[],r={},o=!1,l=!1;function u(t){var e=a.map(rt.pluck("name")).indexOf(t);return a[e]}function c(){var t=i.data().map(function(t){return t.domainValues});return Array.prototype.concat.apply([],t)}function s(t){return!t.hidden}return i.stack=function(t,e,n){if(!arguments.length)return a;arguments.length<=2&&(n=e);var r={group:t};return"string"==typeof e&&(r.name=e),"function"==typeof n&&(r.accessor=n),a.push(r),i},rt.override(i,"group",function(t,e,n){return arguments.length?(a=[],r={},i.stack(t,e),n&&i.valueAccessor(n),i._group(t,e)):i._group()}),i.hidableStacks=function(t){return arguments.length?(o=t,i):o},i.hideStack=function(t){var e=u(t);return e&&(e.hidden=!0),i},i.showStack=function(t){var e=u(t);return e&&(e.hidden=!1),i},i.getValueAccessorByIndex=function(t){return a[t].accessor||i.valueAccessor()},i.yAxisMin=function(){var t=nt.min(c(),function(t){return t.y<0?t.y+t.y0:t.y0});return rt.utils.subtract(t,i.yAxisPadding())},i.yAxisMax=function(){var t=nt.max(c(),function(t){return 0<t.y?t.y+t.y0:t.y0});return rt.utils.add(t,i.yAxisPadding())},i.xAxisMin=function(){var t=nt.min(c(),rt.pluck("x"));return rt.utils.subtract(t,i.xAxisPadding(),i.xAxisPaddingUnit())},i.xAxisMax=function(){var t=nt.max(c(),rt.pluck("x"));return rt.utils.add(t,i.xAxisPadding(),i.xAxisPaddingUnit())},rt.override(i,"title",function(t,e){return t?"function"==typeof t?i._title(t):t===i._groupName&&"function"==typeof e?i._title(e):"function"!=typeof e?r[t]||i._title():(r[t]=e,i):i._title()}),i.stackLayout=function(t){return arguments.length?(e=t,i):e},i.evadeDomainFilter=function(t){return arguments.length?(l=t,i):l},i.data(function(){var r=a.filter(s);if(!r.length)return[];r.forEach(n);var t=r[0].values.map(function(t,e){var n={x:t.x};return r.forEach(function(t){n[t.name]=t.values[e].y}),n}),e=r.map(function(t){return t.name});return i.stackLayout().keys(e)(t).forEach(function(t,n){t.forEach(function(t,e){r[n].values[e].y0=t[0],r[n].values[e].y1=t[1]})}),r}),i._ordinalXDomain=function(){var t=c().map(rt.pluck("data"));return i._computeOrderedGroups(t).map(i.keyAccessor())},i.colorAccessor(function(t){return this.layer||this.name||t.name||t.layer}),i.legendables=function(){return a.map(function(t,e){return{chart:i,name:t.name,hidden:t.hidden||!1,color:i.getColor.call(t,t.values,e)}})},i.isLegendableHidden=function(t){var e=u(t.name);return!!e&&e.hidden},i.legendToggle=function(t){o&&(i.isLegendableHidden(t)?i.showStack(t.name):i.hideStack(t.name),i.renderGroup())},i},rt.capMixin=function(i){var a=1/0,o=!0,e="Others";i.ordering(function(t){return-t.value});var l=function(t,e){var n=nt.sum(e,i.valueAccessor()),r=e.map(i.keyAccessor());return 0<n?t.concat([{others:r,key:i.othersLabel(),value:n}]):t};return i.cappedKeyAccessor=function(t,e){return t.others?t.key:i.keyAccessor()(t,e)},i.cappedValueAccessor=function(t,e){return t.others?t.value:i.valueAccessor()(t,e)},i.data(function(t){if(a===1/0)return i._computeOrderedGroups(t.all());var e,n=t.all();if(n=i._computeOrderedGroups(n),a)if(o)e=n.slice(a),n=n.slice(0,a);else{var r=Math.max(0,n.length-a);e=n.slice(0,r),n=n.slice(r)}return l?l(n,e):n}),i.cap=function(t){return arguments.length?(a=t,i):a},i.takeFront=function(t){return arguments.length?(o=t,i):o},i.othersLabel=function(t){return arguments.length?(e=t,i):e},i.othersGrouper=function(t){return arguments.length?(l=t,i):l},rt.override(i,"onClick",function(t){t.others&&i.filter([t.others]),i._onClick(t)}),i},rt.bubbleMixin=function(r){var e=.3,n=10,i=!1,a=!1;r.BUBBLE_NODE_CLASS="node",r.BUBBLE_CLASS="bubble",r.MIN_RADIUS=10,(r=rt.colorMixin(r)).renderLabel(!0),r.data(function(t){var e=t.all();if(i){var n=r.radiusValueAccessor();e.sort(function(t,e){return nt.descending(n(t),n(e))})}return e});var o=nt.scaleLinear().domain([0,100]),l=function(t){return t.r};r.r=function(t){return arguments.length?(o=t,r):o},r.elasticRadius=function(t){return arguments.length?(a=t,r):a},r.calculateRadiusDomain=function(){a&&r.r().domain([r.rMin(),r.rMax()])},r.radiusValueAccessor=function(t){return arguments.length?(l=t,r):l},r.rMin=function(){return nt.min(r.data(),function(t){return r.radiusValueAccessor()(t)})},r.rMax=function(){return nt.max(r.data(),function(t){return r.radiusValueAccessor()(t)})},r.bubbleR=function(t){var e=r.radiusValueAccessor()(t),n=r.r()(e);return(isNaN(n)||e<=0)&&(n=0),n};var u=function(t){return r.label()(t)},c=function(t){return r.bubbleR(t)>n},s=function(t){return c(t)?1:0},d=function(t){return c(t)?"all":"none"};r._doRenderLabel=function(t){if(r.renderLabel()){var e=t.select("text");e.empty()&&(e=t.append("text").attr("text-anchor","middle").attr("dy",".3em").on("click",r.onClick)),e.attr("opacity",0).attr("pointer-events",d).text(u),rt.transition(e,r.transitionDuration(),r.transitionDelay()).attr("opacity",s)}},r.doUpdateLabels=function(t){if(r.renderLabel()){var e=t.select("text").attr("pointer-events",d).text(u);rt.transition(e,r.transitionDuration(),r.transitionDelay()).attr("opacity",s)}};var f=function(t){return r.title()(t)};return r._doRenderTitles=function(t){r.renderTitle()&&(t.select("title").empty()&&t.append("title").text(f))},r.doUpdateTitles=function(t){r.renderTitle()&&t.select("title").text(f)},r.sortBubbleSize=function(t){return arguments.length?(i=t,r):i},r.minRadius=function(t){return arguments.length?(r.MIN_RADIUS=t,r):r.MIN_RADIUS},r.minRadiusWithLabel=function(t){return arguments.length?(n=t,r):n},r.maxBubbleRelativeSize=function(t){return arguments.length?(e=t,r):e},r.fadeDeselectedArea=function(t){r.hasFilter()?r.selectAll("g."+r.BUBBLE_NODE_CLASS).each(function(t){r.isSelectedNode(t)?r.highlightSelected(this):r.fadeDeselected(this)}):r.selectAll("g."+r.BUBBLE_NODE_CLASS).each(function(){r.resetHighlight(this)})},r.isSelectedNode=function(t){return r.hasFilter(t.key)},r.onClick=function(t){var e=t.key;rt.events.trigger(function(){r.filter(e),r.redrawGroup()})},r},rt.pieChart=function(t,e){var _,k,D,n,r,w,C="pie-slice",L="pie-label",S="pie-slice-group",E="pie-label-group",R="empty-chart",M="empty",i=0,a=0,o=.5,O=!1,T=rt.capMixin(rt.colorMixin(rt.baseMixin({})));function l(){var t=nt.min([T.width(),T.height()])/2;_=k&&k<t?k:t;var e,n,r,i,a,o,l,u,c,s,d,f,h,g,p,y,m,v=H(),x=nt.pie().sort(null).value(T.cappedValueAccessor);if(nt.sum(T.data(),T.cappedValueAccessor)?(e=x(T.data()),D.classed(R,!1)):(e=x([{key:M,value:1,others:[M]}]),D.classed(R,!0)),D){var A=D.select("g."+S).selectAll("g."+C).data(e),b=D.select("g."+E).selectAll("text."+L).data(e);m=b,A.exit().remove(),m.exit().remove(),c=b,s=v,d=e,f=A.enter().append("g").attr("class",function(t,e){return C+" _"+e}),g=s,p=f.append("path").attr("fill",U).on("click",Y).attr("d",function(t,e){return z(t,e,g)}),(y=rt.transition(p,T.transitionDuration(),T.transitionDelay())).attrTween&&y.attrTween("d",P),h=f,T.renderTitle()&&h.append("title").text(function(t){return T.title()(t.data)}),function(t,e,n){if(T.renderLabel()){var r=t.enter().append("text").attr("class",function(t,e){var n=C+" "+L+" _"+e;return w&&(n+=" external"),n}).on("click",Y).on("mouseover",function(t,e){F(e,!0)}).on("mouseout",function(t,e){F(e,!1)});B(r,n),w&&O&&N(e,n)}}(c,d,s),n=o=e,r=l=v,i=D.selectAll("g."+C).data(n).select("path").attr("d",function(t,e){return z(t,e,r)}),(a=rt.transition(i,T.transitionDuration(),T.transitionDelay())).attrTween&&a.attrTween("d",P),a.attr("fill",U),function(t,e){if(T.renderLabel()){var n=D.selectAll("text."+L).data(t);B(n,e),w&&O&&N(t,e)}}(o,l),u=o,T.renderTitle()&&D.selectAll("g."+C).data(u).select("title").text(function(t){return T.title()(t.data)}),T.hasFilter()?T.selectAll("g."+C).each(function(t){G(t)?T.highlightSelected(this):T.fadeDeselected(this)}):T.selectAll("g."+C).each(function(){T.resetHighlight(this)}),rt.transition(D,T.transitionDuration(),T.transitionDelay()).attr("transform","translate("+T.cx()+","+T.cy()+")")}}function B(t,e){T._applyLabelText(t),rt.transition(t,T.transitionDuration(),T.transitionDelay()).attr("transform",function(t){return function(t,e){var n;n=w?nt.arc().outerRadius(_-a+w).innerRadius(_-a+w).centroid(t):e.centroid(t);return isNaN(n[0])||isNaN(n[1])?"translate(0,0)":"translate("+n+")"}(t,e)}).attr("text-anchor","middle")}function F(t,e){T.select("g.pie-slice._"+t).classed("highlight",e)}function N(t,r){var e=D.selectAll("polyline."+C).data(t);e.exit().remove(),e=e.enter().append("polyline").attr("class",function(t,e){return"pie-path _"+e+" "+C}).on("click",Y).on("mouseover",function(t,e){F(e,!0)}).on("mouseout",function(t,e){F(e,!1)}).merge(e);var i=nt.arc().outerRadius(_-a+w).innerRadius(_-a),n=rt.transition(e,T.transitionDuration(),T.transitionDelay());n.attrTween?n.attrTween("points",function(t){var e=this._current||t;e={startAngle:e.startAngle,endAngle:e.endAngle};var n=nt.interpolate(e,t);return this._current=n(0),function(t){var e=n(t);return[r.centroid(e),i.centroid(e)]}}):n.attr("points",function(t){return[r.centroid(t),i.centroid(t)]}),n.style("visibility",function(t){return t.endAngle-t.startAngle<1e-4?"hidden":"visible"})}function H(){return nt.arc().outerRadius(_-a).innerRadius(i)}function G(t){return T.hasFilter(T.cappedKeyAccessor(t.data))}function P(t){t.innerRadius=i;var e,n=this._current;n=!(e=n)||isNaN(e.startAngle)||isNaN(e.endAngle)?{startAngle:0,endAngle:0}:{startAngle:n.startAngle,endAngle:n.endAngle};var r=nt.interpolate(n,t);return this._current=r(0),function(t){return z(r(t),0,H())}}function U(t,e){return T.getColor(t.data,e)}function Y(t,e){D.attr("class")!==R&&T.onClick(t.data,e)}function z(t,e,n){var r=n(t,e);return 0<=r.indexOf("NaN")&&(r="M0,0"),r}function u(e,n){T.selectAll("g.pie-slice").each(function(t){e.name===t.data.key&&nt.select(this).classed("highlight",n)})}return T.colorAccessor(T.cappedKeyAccessor),T.title(function(t){return T.cappedKeyAccessor(t)+": "+T.cappedValueAccessor(t)}),T.slicesCap=T.cap,T.label(T.cappedKeyAccessor),T.renderLabel(!0),T.transitionDuration(350),T.transitionDelay(0),T._doRender=function(){return T.resetSvg(),(D=T.svg().append("g").attr("transform","translate("+T.cx()+","+T.cy()+")")).append("g").attr("class",S),D.append("g").attr("class",E),l(),T},T._applyLabelText=function(t){t.text(function(t){var e,n,r,i=t.data;return r=i,(0===T.cappedValueAccessor(r)||(n=(e=t).endAngle-e.startAngle,isNaN(n)||n<o))&&!G(t)?"":T.label()(t.data)})},T.externalRadiusPadding=function(t){return arguments.length?(a=t,T):a},T.innerRadius=function(t){return arguments.length?(i=t,T):i},T.radius=function(t){return arguments.length?(k=t,T):k},T.cx=function(t){return arguments.length?(n=t,T):n||T.width()/2},T.cy=function(t){return arguments.length?(r=t,T):r||T.height()/2},T._doRedraw=function(){return l(),T},T.minAngleForLabel=function(t){return arguments.length?(o=t,T):o},T.emptyTitle=function(t){return 0===arguments.length?M:(M=t,T)},T.externalLabels=function(t){return 0===arguments.length?w:(w=t||void 0,T)},T.drawPaths=function(t){return 0===arguments.length?O:(O=t,T)},T.legendables=function(){return T.data().map(function(t,e){var n={name:t.key,data:t.value,others:t.others,chart:T};return n.color=T.getColor(t,e),n})},T.legendHighlight=function(t){u(t,!0)},T.legendReset=function(t){u(t,!1)},T.legendToggle=function(t){T.onClick({key:t.name,others:t.others})},T.anchor(t,e)},rt.sunburstChart=function(t,e){var v,x,A,n,r,b,_="pie-slice",k="empty-chart",i="empty",a=0,o=.5,D=rt.capMixin(rt.colorMixin(rt.baseMixin({})));function l(t){return t.path?t.value:D.cappedValueAccessor(t)}function u(){var t=nt.min([D.width(),D.height()])/2;v=x&&x<t?x:t;var e,n,r,i,a,o,l,u,c,s,d,f,h,g,p,y=C();if(nt.sum(D.data(),D.valueAccessor())?((e=L(rt.utils.toHierarchy(D.data(),D.valueAccessor()))).shift(),A.classed(k,!1)):(e=L(rt.utils.toHierarchy([],function(t){return t.value})),A.classed(k,!0)),A){var m=A.selectAll("g."+_).data(e);c=y,s=e,d=m.enter().append("g").attr("class",function(t,e){return _+" _"+e+" "+_+"-level-"+t.depth}),h=c,g=d.append("path").attr("fill",E).on("click",R).attr("d",function(t){return M(h,t)}),(p=rt.transition(g,D.transitionDuration())).attrTween&&p.attrTween("d",S),f=d,D.renderTitle()&&f.append("title").text(function(t){return D.title()(t)}),function(t,e){if(D.renderLabel()){var n=A.selectAll("text."+_).data(t);n.exit().remove();var r=n.enter().append("text").attr("class",function(t,e){var n=_+" _"+e;return b&&(n+=" external"),n}).on("click",R);w(r,e)}}(s,c),n=o=e,r=l=y,i=A.selectAll("g."+_).data(n).select("path").attr("d",function(t,e){return M(r,t)}),(a=rt.transition(i,D.transitionDuration())).attrTween&&a.attrTween("d",S),a.attr("fill",E),function(t,e){if(D.renderLabel()){var n=A.selectAll("text."+_).data(t);w(n,e)}}(o,l),u=o,D.renderTitle()&&A.selectAll("g."+_).data(u).select("title").text(function(t){return D.title()(t)}),m.exit().remove(),D.hasFilter()?D.selectAll("g."+_).each(function(t){!function(t){for(var e=0;e<D.filters().length;e++){var n=D.filters()[e];if(n.isFiltered(t))return!0}return!1}(t.path)?D.fadeDeselected(this):D.highlightSelected(this)}):D.selectAll("g."+_).each(function(t){D.resetHighlight(this)}),rt.transition(A,D.transitionDuration(),D.transitionDelay()).attr("transform","translate("+D.cx()+","+D.cy()+")")}}function w(t,e){rt.transition(t,D.transitionDuration()).attr("transform",function(t){return function(t,e){var n;n=b?nt.svg.arc().outerRadius(v+b).innerRadius(v+b).centroid(t):e.centroid(t);return isNaN(n[0])||isNaN(n[1])?"translate(0,0)":"translate("+n+")"}(t,e)}).attr("text-anchor","middle").text(function(t){return 0===l(t)||(n=(e=t).x1-e.x0,isNaN(n)||n<o)?"":D.label()(t);var e,n})}function C(){return nt.arc().startAngle(function(t){return t.x0}).endAngle(function(t){return t.x1}).innerRadius(function(t){return t.data.path&&1===t.data.path.length?a:Math.sqrt(t.y0)}).outerRadius(function(t){return Math.sqrt(t.y1)})}function L(t){var e=nt.hierarchy(t).sum(function(t){return t.children?0:l(t)}).sort(function(t,e){return nt.ascending(t.data.path,e.data.path)});return nt.partition().size([2*Math.PI,v*v])(e),e.descendants().map(function(t){return t.key=t.data.key,t.path=t.data.path,t})}function S(e){var t,n=this._current;(!(t=n)||isNaN(t.x0)||isNaN(t.y0))&&(n={x0:0,x1:0,y0:0,y1:0});var r={x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1},i=nt.interpolate(n,r);return this._current=i(0),function(t){return M(C(),Object.assign({},e,i(t)))}}function E(t,e){return D.getColor(t.data,e)}function c(t){for(var e=t.path||t.key,n=rt.filters.HierarchyFilter(e),r=function(t){for(var e=rt.filters.HierarchyFilter(t),n=[],r=0;r<D.filters().length;r++){var i=D.filters()[r];(i.isFiltered(t)||e.isFiltered(i))&&n.push(i)}return n}(e),i=!1,a=r.length-1;0<=a;a--){var o=r[a];rt.utils.arraysIdentical(o,e)&&(i=!0),D.filter(r[a])}rt.events.trigger(function(){i||D.filter(n),D.redrawGroup()})}function R(t,e){A.attr("class")!==k&&c(t)}function M(t,e){var n=t(e);return 0<=n.indexOf("NaN")&&(n="M0,0"),n}function s(e,n){D.selectAll("g.pie-slice").each(function(t){e.name===t.key&&nt.select(this).classed("highlight",n)})}return D.colorAccessor(D.cappedKeyAccessor),D.title(function(t){return D.cappedKeyAccessor(t)+": "+l(t)}),D.label(D.cappedKeyAccessor),D.renderLabel(!0),D.transitionDuration(350),D.filterHandler(function(t,r){return 0===r.length?t.filter(null):t.filterFunction(function(t){for(var e=0;e<r.length;e++){var n=r[e];if(n.isFiltered&&n.isFiltered(t))return!0}return!1}),r}),D._doRender=function(){return D.resetSvg(),A=D.svg().append("g").attr("transform","translate("+D.cx()+","+D.cy()+")"),u(),D},D.innerRadius=function(t){return arguments.length?(a=t,D):a},D.radius=function(t){return arguments.length?(x=t,D):x},D.cx=function(t){return arguments.length?(n=t,D):n||D.width()/2},D.cy=function(t){return arguments.length?(r=t,D):r||D.height()/2},D.minAngleForLabel=function(t){return arguments.length?(o=t,D):o},D.emptyTitle=function(t){return 0===arguments.length?i:(i=t,D)},D.externalLabels=function(t){return 0===arguments.length?b:(b=t||void 0,D)},D._doRedraw=function(){return u(),D},D.onClick=R,D.legendables=function(){return D.data().map(function(t,e){var n={name:t.key,data:t.value,others:t.others,chart:D};return n.color=D.getColor(t,e),n})},D.legendHighlight=function(t){s(t,!0)},D.legendReset=function(t){s(t,!1)},D.legendToggle=function(t){D.onClick({key:t.name,others:t.others})},D.anchor(t,e)},rt.barChart=function(t,e){var o,n=3,l=rt.stackMixin(rt.coordinateGridMixin({})),i=2,r=!1,a=!1;function u(t){return rt.utils.safeNumber(Math.abs(l.y()(t.y+t.y0)-l.y()(t.y0)))}function c(t){var e=l.x()(t.x);return r||(e+=o/2),l.isOrdinal()&&void 0!==i&&(e+=i/2),rt.utils.safeNumber(e)}function s(t){var e=l.y()(t.y+t.y0);return t.y<0&&(e-=u(t)),rt.utils.safeNumber(e-n)}function d(t){var e=l.x()(t.x);return r&&(e-=o/2),l.isOrdinal()&&void 0!==i&&(e+=i/2),rt.utils.safeNumber(e)}function f(e,n){return function(){var t=nt.select(this).attr("fill")===e;return n?!t:t}}return rt.override(l,"rescale",function(){return l._rescale(),o=void 0,l}),rt.override(l,"render",function(){return l.round()&&r&&!a&&rt.logger.warn("By default, brush rounding is disabled if bars are centered. See dc.js bar chart API documentation for details."),l._render()}),l.label(function(t){return rt.utils.printSingleValue(t.y0+t.y)},!1),l.plotData=function(){var t=l.chartBodyG().selectAll("g.stack").data(l.data());!function(){if(void 0===o){var t=l.xUnitCount();((o=l.isOrdinal()&&void 0===i?Math.floor(l.x().bandwidth()):i?Math.floor((l.xAxisLength()-(t-1)*i)/t):Math.floor(l.xAxisLength()/(1+l.barPadding())/t))===1/0||isNaN(o)||o<1)&&(o=1)}}();var r=(t=t.enter().append("g").attr("class",function(t,e){return"stack _"+e}).merge(t)).size()-1;t.each(function(t,e){var n=nt.select(this);!function(t,e,n){var r=t.selectAll("rect.bar").data(n.values,rt.pluck("x")),i=r.enter().append("rect").attr("class","bar").attr("fill",rt.pluck("data",l.getColor)).attr("x",d).attr("y",l.yAxisHeight()).attr("height",0),a=i.merge(r);l.renderTitle()&&i.append("title").text(rt.pluck("data",l.title(n.name)));l.isOrdinal()&&a.on("click",l.onClick);rt.transition(a,l.transitionDuration(),l.transitionDelay()).attr("x",d).attr("y",function(t){var e=l.y()(t.y+t.y0);return t.y<0&&(e-=u(t)),rt.utils.safeNumber(e)}).attr("width",o).attr("height",function(t){return u(t)}).attr("fill",rt.pluck("data",l.getColor)).select("title").text(rt.pluck("data",l.title(n.name))),rt.transition(r.exit(),l.transitionDuration(),l.transitionDelay()).attr("x",function(t){return l.x()(t.x)}).attr("width",.9*o).remove()}(n,0,t),l.renderLabel()&&r===e&&function(t,e,n){var r=t.selectAll("text.barLabel").data(n.values,rt.pluck("x")),i=r.enter().append("text").attr("class","barLabel").attr("text-anchor","middle").attr("x",c).attr("y",s).merge(r);l.isOrdinal()&&(i.on("click",l.onClick),i.attr("cursor","pointer"));rt.transition(i,l.transitionDuration(),l.transitionDelay()).attr("x",c).attr("y",s).text(function(t){return l.label()(t)}),rt.transition(r.exit(),l.transitionDuration(),l.transitionDelay()).attr("height",0).remove()}(n,0,t)})},l.fadeDeselectedArea=function(t){var e=l.chartBodyG().selectAll("rect.bar");if(l.isOrdinal())l.hasFilter()?(e.classed(rt.constants.SELECTED_CLASS,function(t){return l.hasFilter(t.x)}),e.classed(rt.constants.DESELECTED_CLASS,function(t){return!l.hasFilter(t.x)})):(e.classed(rt.constants.SELECTED_CLASS,!1),e.classed(rt.constants.DESELECTED_CLASS,!1));else if(l.brushOn()||l.parentBrushOn())if(l.brushIsEmpty(t))e.classed(rt.constants.DESELECTED_CLASS,!1);else{var n=t[0],r=t[1];e.classed(rt.constants.DESELECTED_CLASS,function(t){return t.x<n||t.x>=r})}},l.centerBar=function(t){return arguments.length?(r=t,l):r},rt.override(l,"onClick",function(t){l._onClick(t.data)}),l.barPadding=function(t){return arguments.length?(l._rangeBandPadding(t),i=void 0,l):l._rangeBandPadding()},l._useOuterPadding=function(){return void 0===i},l.outerPadding=l._outerRangeBandPadding,l.gap=function(t){return arguments.length?(i=t,l):i},l.extendBrush=function(t){return t&&l.round()&&(!r||a)&&(t[0]=l.round()(t[0]),t[1]=l.round()(t[1])),t},l.alwaysUseRounding=function(t){return arguments.length?(a=t,l):a},l.legendHighlight=function(t){l.isLegendableHidden(t)||l.g().selectAll("rect.bar").classed("highlight",f(t.color)).classed("fadeout",f(t.color,!0))},l.legendReset=function(){l.g().selectAll("rect.bar").classed("highlight",!1).classed("fadeout",!1)},rt.override(l,"xAxisMax",function(){var t=this._xAxisMax();"resolution"in l.xUnits()&&(t+=l.xUnits().resolution);return t}),l.anchor(t,e)},rt.lineChart=function(t,e){var l,i,c="dc-tooltip",s="yRef",d="xRef",f=rt.stackMixin(rt.coordinateGridMixin({})),a=!1,h=5,n=null,g=1e-6,p=1e-6,r=null,o=null,u=null,y=!0;function m(t,e){return f.getColor.call(t,t.values,e)}function v(){var t=null;if(r)return r;"function"==typeof o?t=o:t={linear:nt.curveLinear,"linear-closed":nt.curveLinearClosed,step:nt.curveStep,"step-before":nt.curveStepBefore,"step-after":nt.curveStepAfter,basis:nt.curveBasis,"basis-open":nt.curveBasisOpen,"basis-closed":nt.curveBasisClosed,bundle:nt.curveBundle,cardinal:nt.curveCardinal,"cardinal-open":nt.curveCardinalOpen,"cardinal-closed":nt.curveCardinalClosed,monotone:nt.curveMonotoneX}[o];return t||(t=nt.curveLinear),null!==u&&("function"!=typeof t.tension?rt.logger.warn("tension was specified but the curve/interpolate does not support it."):t=t.tension(u)),t}function x(t){return!t||0<=t.indexOf("NaN")?"M0,0":t}function A(){return n||h}function b(t,e){f.renderTitle()&&(t.select("title").remove(),t.append("title").text(rt.pluck("data",f.title(e.name))))}function _(n,r,i){return function(){var t=nt.select(this),e=t.attr("stroke")===n&&t.attr("stroke-dasharray")===(r instanceof Array?r.join(","):null)||t.attr("fill")===n;return i?!e:e}}return f.transitionDuration(500),f.transitionDelay(0),f._rangeBandPadding(1),f.plotData=function(){var t=f.chartBodyG(),e=t.select("g.stack-list");e.empty()&&(e=t.append("g").attr("class","stack-list"));var n=e.selectAll("g.stack").data(f.data()),r=n.enter().append("g").attr("class",function(t,e){return"stack _"+e});(function(t,e){var n=nt.line().x(function(t){return f.x()(t.x)}).y(function(t){return f.y()(t.y+t.y0)}).curve(v());l&&n.defined(l);var r=t.append("path").attr("class","line").attr("stroke",m);i&&r.attr("stroke-dasharray",i);rt.transition(e.select("path.line"),f.transitionDuration(),f.transitionDelay()).attr("stroke",m).attr("d",function(t){return x(n(t.values))})})(r,n=r.merge(n)),function(t,e){if(a){var n=nt.area().x(function(t){return f.x()(t.x)}).y1(function(t){return f.y()(t.y+t.y0)}).y0(function(t){return f.y()(t.y0)}).curve(v());l&&n.defined(l),t.append("path").attr("class","area").attr("fill",m).attr("d",function(t){return x(n(t.values))}),rt.transition(e.select("path.area"),f.transitionDuration(),f.transitionDelay()).attr("fill",m).attr("d",function(t){return x(n(t.values))})}}(r,n),function(t,e){if("always"===f.xyTipsOn()||!f.brushOn()&&!f.parentBrushOn()&&f.xyTipsOn()){var n=c+"-list",o=t.select("g."+n);o.empty()&&(o=t.append("g").attr("class",n)),e.each(function(t,e){var n=t.values;l&&(n=n.filter(l));var r,u=o.select("g."+c+"._"+e);u.empty()&&(u=o.append("g").attr("class",c+" _"+e)),((r=u).select("path."+s).empty()?r.append("path").attr("class",s):r.select("path."+s)).style("display","none").attr("stroke-dasharray","5,5"),(r.select("path."+d).empty()?r.append("path").attr("class",d):r.select("path."+d)).style("display","none").attr("stroke-dasharray","5,5");var i=u.selectAll("circle.dot").data(n,rt.pluck("x")),a=i.enter().append("circle").attr("class","dot").attr("cx",function(t){return rt.utils.safeNumber(f.x()(t.x))}).attr("cy",function(t){return rt.utils.safeNumber(f.y()(t.y+t.y0))}).attr("r",A()).style("fill-opacity",g).style("stroke-opacity",p).attr("fill",f.getColor).attr("stroke",f.getColor).on("mousemove",function(){var t,e,n,r,i,a,o,l=nt.select(this);(t=l).style("fill-opacity",.8),t.style("stroke-opacity",.8),t.attr("r",h),n=u,r=(e=l).attr("cx"),i=e.attr("cy"),a="M"+(f._yAxisX()-f.margins().left)+" "+i+"L"+r+" "+i,o="M"+r+" "+f.yAxisHeight()+"L"+r+" "+i,n.select("path."+s).style("display","").attr("d",a),n.select("path."+d).style("display","").attr("d",o)}).on("mouseout",function(){var t,e=nt.select(this);e.style("fill-opacity",g).style("stroke-opacity",p).attr("r",A()),(t=u).select("path."+s).style("display","none"),t.select("path."+d).style("display","none")}).merge(i);a.call(b,t),rt.transition(a,f.transitionDuration()).attr("cx",function(t){return rt.utils.safeNumber(f.x()(t.x))}).attr("cy",function(t){return rt.utils.safeNumber(f.y()(t.y+t.y0))}).attr("fill",f.getColor),i.exit().remove()})}}(t,n),f.renderLabel()&&n.each(function(t,e){var n=nt.select(this),r=n.selectAll("text.lineLabel").data(t.values,rt.pluck("x")),i=r.enter().append("text").attr("class","lineLabel").attr("text-anchor","middle").merge(r);rt.transition(i,f.transitionDuration()).attr("x",function(t){return rt.utils.safeNumber(f.x()(t.x))}).attr("y",function(t){var e=f.y()(t.y+t.y0)-3;return rt.utils.safeNumber(e)}).text(function(t){return f.label()(t)}),rt.transition(r.exit(),f.transitionDuration()).attr("height",0).remove()})},f.curve=function(t){return arguments.length?(r=t,f):r},f.interpolate=rt.logger.deprecate(function(t){return arguments.length?(o=t,f):o},"dc.lineChart.interpolate has been deprecated since version 3.0 use dc.lineChart.curve instead"),f.tension=rt.logger.deprecate(function(t){return arguments.length?(u=t,f):u},"dc.lineChart.tension has been deprecated since version 3.0 use dc.lineChart.curve instead"),f.defined=function(t){return arguments.length?(l=t,f):l},f.dashStyle=function(t){return arguments.length?(i=t,f):i},f.renderArea=function(t){return arguments.length?(a=t,f):a},f.label(function(t){return rt.utils.printSingleValue(t.y0+t.y)},!1),f.xyTipsOn=function(t){return arguments.length?(y=t,f):y},f.dotRadius=function(t){return arguments.length?(h=t,f):h},f.renderDataPoints=function(t){return arguments.length?(n=t?(g=t.fillOpacity||.8,p=t.strokeOpacity||0,t.radius||2):(p=g=1e-6,null),f):{fillOpacity:g,strokeOpacity:p,radius:n}},f.legendHighlight=function(t){f.isLegendableHidden(t)||f.g().selectAll("path.line, path.area").classed("highlight",_(t.color,t.dashstyle)).classed("fadeout",_(t.color,t.dashstyle,!0))},f.legendReset=function(){f.g().selectAll("path.line, path.area").classed("highlight",!1).classed("fadeout",!1)},rt.override(f,"legendables",function(){var t=f._legendables();return i?t.map(function(t){return t.dashstyle=i,t}):t}),f.anchor(t,e)},rt.dataCount=function(t,e){var i=nt.format(",d"),a=rt.baseMixin({}),n=null,r=null,o={some:"",all:""};return a._mandatoryAttributes(["crossfilter","groupAll"]),a.html=function(t){return arguments.length?(t.all&&(o.all=t.all),t.some&&(o.some=t.some),a):o},a.formatNumber=function(t){return arguments.length?(i=t,a):i},a._doRender=function(){var t=a.crossfilter().size(),e=a.groupAll().value(),n=i(t),r=i(e);return t===e&&""!==o.all?a.root().html(o.all.replace("%total-count",n).replace("%filter-count",r)):""!==o.some?a.root().html(o.some.replace("%total-count",n).replace("%filter-count",r)):(a.selectAll(".total-count").text(n),a.selectAll(".filter-count").text(r)),a},a._doRedraw=function(){return a._doRender()},a.crossfilter=function(t){return arguments.length?(n=t,this):n},a.dimension=rt.logger.annotate(a.crossfilter,"consider using dataCount.crossfilter instead of dataCount.dimension for clarity"),a.groupAll=function(t){return arguments.length?(r=t,this):r},a.group=rt.logger.annotate(a.groupAll,"consider using dataCount.groupAll instead of dataCount.group for clarity"),a.anchor(t,e)},rt.dataTable=function(t,e){var o,r="dc-table-row",l=rt.baseMixin({}),u=25,c=[],s=function(t){return t},d=nt.ascending,f=0,h=!0,n=function(){return""};return l._mandatoryAttributes(["dimension"]),l._doRender=function(){var t,e,n;return l.selectAll("tbody").remove(),t=function(){var e=!0;if(c.forEach(function(t){e&="function"==typeof t}),!e){var t=l.selectAll("thead").data([0]);t.exit().remove();var n=(t=t.enter().append("thead").merge(t)).selectAll("tr").data([0]);n.exit().remove();var r=(n=n.enter().append("tr").merge(n)).selectAll("th").data(c);r.exit().remove(),r.enter().append("th").merge(r).attr("class","dc-table-head").html(function(t){return l._doColumnHeaderFormat(t)})}var i=l.root().selectAll("tbody").data(function(){var t;t=d===nt.ascending?l.dimension().bottom(u):l.dimension().top(u);return nt.nest().key(l.section()).sortKeys(d).entries(t.sort(function(t,e){return d(s(t),s(e))}).slice(f,o))}(),function(t){return l.keyAccessor()(t)}),a=i.enter().append("tbody");!0===h&&a.append("tr").attr("class","dc-table-section dc-table-group").append("td").attr("class","dc-table-label").attr("colspan",c.length).html(function(t){return l.keyAccessor()(t)});return i.exit().remove(),a}(),e=t.order().selectAll("tr."+r).data(function(t){return t.values}),n=e.enter().append("tr").attr("class",r),c.forEach(function(e,t){n.append("td").attr("class","dc-table-column _"+t).html(function(t){return l._doColumnValueFormat(e,t)})}),e.exit().remove(),l},l._doColumnValueFormat=function(t,e){return"function"==typeof t?t(e):"string"==typeof t?e[t]:t.format(e)},l._doColumnHeaderFormat=function(t){return"function"==typeof t?l._doColumnHeaderFnToString(t):"string"==typeof t?l._doColumnHeaderCapitalize(t):String(t.label)},l._doColumnHeaderCapitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},l._doColumnHeaderFnToString=function(t){var e=String(t),n=e.indexOf("return ");if(0<=n){var r=e.lastIndexOf(";");if(0<=r)0<=(e=e.substring(n+7,r)).indexOf("numberFormat")&&(e=e.replace("numberFormat",""))}return e},l._doRedraw=function(){return l._doRender()},l.section=function(t){return arguments.length?(n=t,l):n},l.group=rt.logger.annotate(l.section,"consider using dataTable.section instead of dataTable.group for clarity"),l.size=function(t){return arguments.length?(u=t,l):u},l.beginSlice=function(t){return arguments.length?(f=t,l):f},l.endSlice=function(t){return arguments.length?(o=t,l):o},l.columns=function(t){return arguments.length?(c=t,l):c},l.sortBy=function(t){return arguments.length?(s=t,l):s},l.order=function(t){return arguments.length?(d=t,l):d},l.showSections=function(t){return arguments.length?(h=t,l):h},l.showGroups=rt.logger.annotate(l.showSections,"consider using dataTable.showSections instead of dataTable.showGroups for clarity"),l.anchor(t,e)},rt.dataGrid=function(t,e){var r,n="dc-grid-item",i="dc-grid-top",a=rt.baseMixin({}),o=null,l=999,u=function(t){return"you need to provide an html() handling param:  "+JSON.stringify(t)},c=function(t){return t},s=nt.ascending,d=0,f=function(t){return"<div class='dc-grid-section dc-grid-group'><h1 class='dc-grid-label'>"+a.keyAccessor()(t)+"</h1></div>"};return a._mandatoryAttributes(["dimension","section"]),a._doRender=function(){var t,e;return a.selectAll("div."+i).remove(),t=function(){var t=a.root().selectAll("div."+i).data((n=a.dimension().top(l),nt.nest().key(a.section()).sortKeys(s).entries(n.sort(function(t,e){return s(c(t),c(e))}).slice(d,r))),function(t){return a.keyAccessor()(t)}),e=t.enter().append("div").attr("class",i);var n;f&&e.html(function(t){return f(t)});return t.exit().remove(),e}(),(e=t.order().selectAll("div."+n).data(function(t){return t.values})).exit().remove(),e=e.enter().append("div").attr("class",n).html(function(t){return u(t)}).merge(e),a},a._doRedraw=function(){return a._doRender()},a.section=function(t){return arguments.length?(o=t,a):o},a.group=rt.logger.annotate(a.section,"consider using dataGrid.section instead of dataGrid.group for clarity"),a.beginSlice=function(t){return arguments.length?(d=t,a):d},a.endSlice=function(t){return arguments.length?(r=t,a):r},a.size=function(t){return arguments.length?(l=t,a):l},a.html=function(t){return arguments.length?(u=t,a):u},a.htmlSection=function(t){return arguments.length?(f=t,a):f},a.htmlGroup=rt.logger.annotate(a.htmlSection,"consider using dataGrid.htmlSection instead of dataGrid.htmlGroup for clarity"),a.sortBy=function(t){return arguments.length?(c=t,a):c},a.order=function(t){return arguments.length?(s=t,a):s},a.anchor(t,e)},rt.bubbleChart=function(t,e){var a=rt.bubbleMixin(rt.coordinateGridMixin({}));a.transitionDuration(750),a.transitionDelay(0);var o=function(t){return"translate("+function(t){var e=a.x()(a.keyAccessor()(t));!isNaN(e)&&isFinite(e)||(e=0);return e}(t)+","+function(t){var e=a.y()(a.valueAccessor()(t));!isNaN(e)&&isFinite(e)||(e=0);return e}(t)+")"};return a.plotData=function(){a.calculateRadiusDomain(),a.r().range([a.MIN_RADIUS,a.xAxisLength()*a.maxBubbleRelativeSize()]);var t,e,n,r=a.data(),i=a.chartBodyG().selectAll("g."+a.BUBBLE_NODE_CLASS).data(r,function(t){return t.key});a.sortBubbleSize()&&i.order(),i.exit().remove(),(e=(t=i).enter().append("g")).attr("class",a.BUBBLE_NODE_CLASS).attr("transform",o).append("circle").attr("class",function(t,e){return a.BUBBLE_CLASS+" _"+e}).on("click",a.onClick).attr("fill",a.getColor).attr("r",0),t=e.merge(t),rt.transition(t,a.transitionDuration(),a.transitionDelay()).select("circle."+a.BUBBLE_CLASS).attr("r",function(t){return a.bubbleR(t)}).attr("opacity",function(t){return 0<a.bubbleR(t)?1:0}),a._doRenderLabel(e),a._doRenderTitles(e),n=i=t,rt.transition(n,a.transitionDuration(),a.transitionDelay()).attr("transform",o).select("circle."+a.BUBBLE_CLASS).attr("fill",a.getColor).attr("r",function(t){return a.bubbleR(t)}).attr("opacity",function(t){return 0<a.bubbleR(t)?1:0}),a.doUpdateLabels(n),a.doUpdateTitles(n),a.fadeDeselectedArea(a.filter())},a.renderBrush=function(){},a.redrawBrush=function(t,e){a.fadeDeselectedArea(t)},a.anchor(t,e)},rt.compositeChart=function(t,e){var r,n="sub",f=rt.coordinateGridMixin({}),i=[],a={},o=!1,l=!0,u=!1,c=nt.axisRight(),s=0,d=12,h=!1;function g(t,e){t._generateG(f.g()),t.g().attr("class",n+" _"+e)}function p(){return i.filter(function(t){return!t.useRightYAxis()})}function y(){return i.filter(function(t){return t.useRightYAxis()})}function m(t){return t.map(function(t){return t.yAxisMin()})}function v(t){return t.map(function(t){return t.yAxisMax()})}return f._mandatoryAttributes([]),f.transitionDuration(500),f.transitionDelay(0),rt.override(f,"_generateG",function(){for(var t=this.__generateG(),e=0;e<i.length;++e){var n=i[e];g(n,e),n.dimension()||n.dimension(f.dimension()),n.group()||n.group(f.group()),n.chartGroup(f.chartGroup()),n.svg(f.svg()),n.xUnits(f.xUnits()),n.transitionDuration(f.transitionDuration(),f.transitionDelay()),n.parentBrushOn(f.brushOn()),n.brushOn(!1),n.renderTitle(f.renderTitle()),n.elasticX(f.elasticX())}return t}),f.on("filtered.dcjs-composite-chart",function(t){for(var e=0;e<i.length;++e)i[e].replaceFilter(f.filter())}),f._prepareYAxis=function(){var t=0!==p().length,e=0!==y().length,n=function(t,e){var n,r,i,a,o;t&&(n=nt.min(m(p())),r=rt.utils.add(nt.max(v(p())),f.yAxisPadding()));e&&(i=nt.min(m(y())),a=rt.utils.add(nt.max(v(y())),f.yAxisPadding()));f.alignYAxes()&&t&&e&&(d=((s=a)-(c=i))/((u=r)-(l=n)),o={lyAxisMin:Math.min(l,c/d),lyAxisMax:Math.max(u,s/d),ryAxisMin:Math.min(c,l*d),ryAxisMax:Math.max(s,u*d)});var l,u,c,s,d;return o||{lyAxisMin:n,lyAxisMax:r,ryAxisMin:i,ryAxisMax:a}}(t,e);t&&function(t){var e=void 0===f.y()||f.elasticY(),n=e||f.resizing();void 0===f.y()&&f.y(nt.scaleLinear());e&&f.y().domain([t.lyAxisMin,t.lyAxisMax]);n&&f.y().rangeRound([f.yAxisHeight(),0]);f.y().range([f.yAxisHeight(),0]),f.yAxis(f.yAxis().scale(f.y()))}(n),e&&function(t){var e=void 0===f.rightY()||f.elasticY(),n=e||f.resizing();void 0===f.rightY()&&f.rightY(nt.scaleLinear());e&&f.rightY().domain([t.ryAxisMin,t.ryAxisMax]);n&&f.rightY().rangeRound([f.yAxisHeight(),0]);f.rightY().range([f.yAxisHeight(),0]),f.rightYAxis(f.rightYAxis().scale(f.rightY()))}(n),0<p().length&&!h?f._renderHorizontalGridLinesForAxis(f.g(),f.y(),f.yAxis()):0<y().length&&f._renderHorizontalGridLinesForAxis(f.g(),r,c)},f.renderYAxis=function(){0!==p().length&&(f.renderYAxisAt("y",f.yAxis(),f.margins().left),f.renderYAxisLabel("y",f.yAxisLabel(),-90)),0!==y().length&&(f.renderYAxisAt("yr",f.rightYAxis(),f.width()-f.margins().right),f.renderYAxisLabel("yr",f.rightYAxisLabel(),90,f.width()-d))},f.plotData=function(){for(var t=0;t<i.length;++t){var e=i[t];e.g()||g(e,t),o&&e.colors(f.colors()),e.x(f.x()),e.xAxis(f.xAxis()),e.useRightYAxis()?(e.y(f.rightY()),e.yAxis(f.rightYAxis())):(e.y(f.y()),e.yAxis(f.yAxis())),e.plotData(),e._activateRenderlets()}},f.useRightAxisGridLines=function(t){return arguments?(h=t,f):h},f.childOptions=function(t){return arguments.length?(a=t,i.forEach(function(t){t.options(a)}),f):a},f.fadeDeselectedArea=function(t){if(f.brushOn())for(var e=0;e<i.length;++e){i[e].fadeDeselectedArea(t)}},f.rightYAxisLabel=function(t,e){return arguments.length?(s=t,f.margins().right-=d,d=void 0===e?12:e,f.margins().right+=d,f):s},f.compose=function(t){return(i=t).forEach(function(t){t.height(f.height()),t.width(f.width()),t.margins(f.margins()),l&&t.title(f.title()),t.options(a)}),f},f.children=function(){return i},f.shareColors=function(t){return arguments.length?(o=t,f):o},f.shareTitle=function(t){return arguments.length?(l=t,f):l},f.rightY=function(t){return arguments.length?(r=t,f.rescale(),f):r},f.alignYAxes=function(t){return arguments.length?(u=t,f.rescale(),f):u},delete f.yAxisMin,delete f.yAxisMax,rt.override(f,"xAxisMin",function(){return rt.utils.subtract(nt.min(i.map(function(t){return t.xAxisMin()})),f.xAxisPadding(),f.xAxisPaddingUnit())}),rt.override(f,"xAxisMax",function(){return rt.utils.add(nt.max(i.map(function(t){return t.xAxisMax()})),f.xAxisPadding(),f.xAxisPaddingUnit())}),f.legendables=function(){return i.reduce(function(t,e){return o&&e.colors(f.colors()),t.push.apply(t,e.legendables()),t},[])},f.legendHighlight=function(t){for(var e=0;e<i.length;++e){i[e].legendHighlight(t)}},f.legendReset=function(t){for(var e=0;e<i.length;++e){i[e].legendReset(t)}},f.legendToggle=function(){console.log("composite should not be getting legendToggle itself")},f.rightYAxis=function(t){return arguments.length?(c=t,f):c},f.anchor(t,e)},rt.seriesChart=function(t,a){var o=rt.compositeChart(t,a);var n,l={},u=rt.lineChart,c=nt.ascending,s=function(t,e){return nt.ascending(o.keyAccessor()(t),o.keyAccessor()(e))};function d(t){l[t].g()&&l[t].g().remove(),delete l[t]}function e(){Object.keys(l).map(d),l={}}return o._mandatoryAttributes().push("seriesAccessor","chart"),o.shareColors(!0),o._preprocessData=function(){var r,i=[],t=nt.nest().key(n);c&&t.sortKeys(c),s&&t.sortValues(s);var e=t.entries(o.data()).map(function(t,e){var n=l[t.key]||u.call(o,o,a,t.key,e);return l[t.key]||(r=!0),l[t.key]=n,i.push(t.key),n.dimension(o.dimension()).group({all:"function"==typeof t.values?t.values:rt.utils.constant(t.values)},t.key).keyAccessor(o.keyAccessor()).valueAccessor(o.valueAccessor()).brushOn(!1)});Object.keys(l).filter(function(t){return-1===i.indexOf(t)}).forEach(function(t){d(t),r=!0}),o._compose(e),r&&o.legend()&&o.legend().render()},o.chart=function(t){return arguments.length?(u=t,e(),o):u},o.seriesAccessor=function(t){return arguments.length?(n=t,e(),o):n},o.seriesSort=function(t){return arguments.length?(c=t,e(),o):c},o.valueSort=function(t){return arguments.length?(s=t,e(),o):s},o._compose=o.compose,delete o.compose,o},rt.geoChoroplethChart=function(t,e){var d=rt.colorMixin(rt.baseMixin({}));d.colorAccessor(function(t){return t||0});var n,r,i=nt.geoPath(),a=[];function o(t){var e,r,i,n,a,o,l,u,c=function(){for(var t={},e=d.data(),n=0;n<e.length;++n)t[d.keyAccessor()(e[n])]=d.valueAccessor()(e[n]);return t}();if(p(t).keyAccessor){var s=(l=t,d.svg().selectAll((u=l,"g.layer"+u+" g."+p(u).name)).classed("selected",function(t){return f(l,t)}).classed("deselected",function(t){return h(l,t)}).attr("class",function(t){var e=p(l).name,n=rt.utils.nameToId(p(l).keyAccessor(t)),r=e+" "+n;return f(l,t)&&(r+=" selected"),h(l,t)&&(r+=" deselected"),r}));n=t,a=c,o=s.select("path").attr("fill",function(){var t=nt.select(this).attr("fill");return t||"none"}).on("click",function(t){return d.onClick(t,n)}),rt.transition(o,d.transitionDuration(),d.transitionDelay()).attr("fill",function(t,e){return d.getColor(a[p(n).keyAccessor(t)],e)}),e=s,r=t,i=c,d.renderTitle()&&e.selectAll("title").text(function(t){var e=g(r,t),n=i[e];return d.title()({key:e,value:n})})}}function f(t,e){return d.hasFilter()&&d.hasFilter(g(t,e))}function h(t,e){return d.hasFilter()&&!d.hasFilter(g(t,e))}function g(t,e){return p(t).keyAccessor(e)}function p(t){return a[t]}d._doRender=function(){d.resetSvg();for(var t=0;t<a.length;++t){var e=d.svg().append("g").attr("class","layer"+t).selectAll("g."+p(t).name).data(p(t).data);(e=e.enter().append("g").attr("class",p(t).name).merge(e)).append("path").attr("fill","white").attr("d",l()),e.append("title"),o(t)}n=!1},d.onClick=function(t,e){var n=p(e).keyAccessor(t);rt.events.trigger(function(){d.filter(n),d.redrawGroup()})},d._doRedraw=function(){for(var t=0;t<a.length;++t)o(t),n&&d.svg().selectAll("g."+p(t).name+" path").attr("d",l());n=!1},d.overlayGeoJson=function(t,e,n){for(var r=0;r<a.length;++r)if(a[r].name===e)return a[r].data=t,a[r].keyAccessor=n,d;return a.push({name:e,data:t,keyAccessor:n}),d},d.projection=function(t){return arguments.length?(r=t,n=!0,d):r};var l=function(){return void 0===r?(rt.logger.warn("choropleth projection default of geoAlbers is deprecated, in next version projection will need to be set explicitly"),i.projection(nt.geoAlbersUsa())):i.projection(r)};return d.geoJsons=function(){return a},d.geoPath=function(){return i},d.removeGeoJson=function(t){for(var e=[],n=0;n<a.length;++n){var r=a[n];r.name!==t&&e.push(r)}return a=e,d},d.anchor(t,e)},rt.bubbleOverlay=function(t,e){var i,n="bubble-overlay",a="node",o="bubble",l=rt.bubbleMixin(rt.baseMixin({})),u=[];function c(){var e={};return l.data().forEach(function(t){e[l.keyAccessor()(t)]=t}),e}function s(t,e){var n=a+" "+rt.utils.nameToId(t.name),r=i.select("g."+rt.utils.nameToId(t.name));return r.empty()&&(r=i.append("g").attr("class",n).attr("transform","translate("+t.x+","+t.y+")")),r.datum(e[t.name]),r}return l.transitionDuration(750),l.transitionDelay(0),l.radiusValueAccessor(function(t){return t.value}),l.point=function(t,e,n){return u.push({name:t,x:e,y:n}),l},l._doRender=function(){var r;return i=function(){(i=l.select("g."+n)).empty()&&(i=l.svg().append("g").attr("class",n));return i}(),l.r().range([l.MIN_RADIUS,l.width()*l.maxBubbleRelativeSize()]),r=c(),l.calculateRadiusDomain(),u.forEach(function(t){var e=s(t,r),n=e.select("circle."+o);n.empty()&&(n=e.append("circle").attr("class",o).attr("r",0).attr("fill",l.getColor).on("click",l.onClick)),rt.transition(n,l.transitionDuration(),l.transitionDelay()).attr("r",function(t){return l.bubbleR(t)}),l._doRenderLabel(e),l._doRenderTitles(e)}),l.fadeDeselectedArea(l.filter()),l},l._doRedraw=function(){var r;return r=c(),l.calculateRadiusDomain(),u.forEach(function(t){var e=s(t,r),n=e.select("circle."+o);rt.transition(n,l.transitionDuration(),l.transitionDelay()).attr("r",function(t){return l.bubbleR(t)}).attr("fill",l.getColor),l.doUpdateLabels(e),l.doUpdateTitles(e)}),l.fadeDeselectedArea(l.filter()),l},l.debug=function(t){if(t){var n=l.select("g."+rt.constants.DEBUG_GROUP_CLASS);n.empty()&&(n=l.svg().append("g").attr("class",rt.constants.DEBUG_GROUP_CLASS));var r=n.append("text").attr("x",10).attr("y",20);n.append("rect").attr("width",l.width()).attr("height",l.height()).on("mousemove",function(){var t=nt.mouse(n.node()),e=t[0]+", "+t[1];r.text(e)})}else l.selectAll(".debug").remove();return l},l.anchor(t,e),l},rt.rowChart=function(t,e){var i,a,n,o,l=10,u=15,c=!1,s="0.35em",d=2,f=5,h=!1,g="row",p="titlerow",r=!1,y=rt.capMixin(rt.marginMixin(rt.colorMixin(rt.baseMixin({})))),m=nt.axisBottom();function v(){var t=i.select("g.axis");!function(){if(!a||n){var t=nt.extent(o,y.cappedValueAccessor);0<t[0]&&(t[0]=0),t[1]<0&&(t[1]=0),a=nt.scaleLinear().domain(t).range([0,y.effectiveWidth()])}m.scale(a)}(),t.empty()&&(t=i.append("g").attr("class","axis")),t.attr("transform","translate(0, "+y.effectiveHeight()+")"),rt.transition(t,y.transitionDuration(),y.transitionDelay()).call(m)}function x(){o=y.data(),v(),i.selectAll("g.tick").select("line.grid-line").remove(),i.selectAll("g.tick").append("line").attr("class","grid-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",function(){return-y.effectiveHeight()});var t,e,n,r=i.selectAll("g."+g).data(o);r.exit().remove(),function(t){var n,e=o.length;n=h||(y.effectiveHeight()-(e+1)*f)/e;c||(u=n/2);var r=t.attr("transform",function(t,e){return"translate(0,"+((e+1)*f+e*n)+")"}).select("rect").attr("height",n).attr("fill",y.getColor).on("click",b).classed("deselected",function(t){return!!y.hasFilter()&&!k(t)}).classed("selected",function(t){return!!y.hasFilter()&&k(t)});rt.transition(r,y.transitionDuration(),y.transitionDelay()).attr("width",function(t){return Math.abs(A()-a(y.cappedValueAccessor(t)))}).attr("transform",_),i=t,y.renderTitle()&&(i.select("title").remove(),i.append("title").text(y.title())),function(t){if(y.renderLabel()){var e=t.select("text").attr("x",l).attr("y",u).attr("dy",s).on("click",b).attr("class",function(t,e){return g+" _"+e}).text(function(t){return y.label()(t)});rt.transition(e,y.transitionDuration(),y.transitionDelay()).attr("transform",_)}if(y.renderTitleLabel()){var n=t.select("."+p).attr("x",y.effectiveWidth()-d).attr("y",u).attr("dy",s).attr("text-anchor","end").on("click",b).attr("class",function(t,e){return p+" _"+e}).text(function(t){return y.title()(t)});rt.transition(n,y.transitionDuration(),y.transitionDelay()).attr("transform",_)}}(t);var i}(r=(t=r,e=t.enter().append("g").attr("class",function(t,e){return g+" _"+e}),e.append("rect").attr("width",0),n=e,y.renderLabel()&&n.append("text").on("click",b),y.renderTitleLabel()&&n.append("text").attr("class",p).on("click",b),e).merge(r))}function A(){var t=a(0);return t===-1/0||t!=t?a(1):t}function b(t){y.onClick(t)}function _(t){var e=a(y.cappedValueAccessor(t)),n=A();return"translate("+(n<e?n:e)+",0)"}function k(t){return y.hasFilter(y.cappedKeyAccessor(t))}return y.rowsCap=y.cap,y._doRender=function(){return y.resetSvg(),i=y.svg().append("g").attr("transform","translate("+y.margins().left+","+y.margins().top+")"),x(),y},y.title(function(t){return y.cappedKeyAccessor(t)+": "+y.cappedValueAccessor(t)}),y.label(y.cappedKeyAccessor),y.x=function(t){return arguments.length?(a=t,y):a},y.renderTitleLabel=function(t){return arguments.length?(r=t,y):r},y._doRedraw=function(){return x(),y},y.xAxis=function(t){return arguments.length?(m=t,this):m},y.fixedBarHeight=function(t){return arguments.length?(h=t,y):h},y.gap=function(t){return arguments.length?(f=t,y):f},y.elasticX=function(t){return arguments.length?(n=t,y):n},y.labelOffsetX=function(t){return arguments.length?(l=t,y):l},y.labelOffsetY=function(t){return arguments.length?(u=t,c=!0,y):u},y.titleLabelOffsetX=function(t){return arguments.length?(d=t,y):d},y.anchor(t,e)},rt.legend=function(){var n,r,o,e={},l=0,u=0,c=12,s=5,d=!1,f=560,h=70,g=!1,p=rt.pluck("name");function y(){return s+c}return e.parent=function(t){return arguments.length?(n=t,e):n},e.render=function(){n.svg().select("g.dc-legend").remove(),o=n.svg().append("g").attr("class","dc-legend").attr("transform","translate("+l+","+u+")");var t=n.legendables();void 0!==r&&(t=t.slice(0,r));var e=o.selectAll("g.dc-legend-item").data(t).enter().append("g").attr("class","dc-legend-item").on("mouseover",function(t){n.legendHighlight(t)}).on("mouseout",function(t){n.legendReset(t)}).on("click",function(t){t.chart.legendToggle(t)});o.selectAll("g.dc-legend-item").classed("fadeout",function(t){return t.chart.isLegendableHidden(t)}),t.some(rt.pluck("dashstyle"))?e.append("line").attr("x1",0).attr("y1",c/2).attr("x2",c).attr("y2",c/2).attr("stroke-width",2).attr("stroke-dasharray",rt.pluck("dashstyle")).attr("stroke",rt.pluck("color")):e.append("rect").attr("width",c).attr("height",c).attr("fill",function(t){return t?t.color:"blue"}),e.append("text").text(p).attr("x",c+2).attr("y",function(){return c/2+(this.clientHeight?this.clientHeight:13)/2-2});var i=0,a=0;e.attr("transform",function(t,e){if(d){var n=!0===g?this.getBBox().width+s:h;f<i+n&&0<i&&(++a,i=0);var r="translate("+i+","+a*y()+")";return i+=n,r}return"translate(0,"+e*y()+")"})},e.x=function(t){return arguments.length?(l=t,e):l},e.y=function(t){return arguments.length?(u=t,e):u},e.gap=function(t){return arguments.length?(s=t,e):s},e.itemHeight=function(t){return arguments.length?(c=t,e):c},e.horizontal=function(t){return arguments.length?(d=t,e):d},e.legendWidth=function(t){return arguments.length?(f=t,e):f},e.itemWidth=function(t){return arguments.length?(h=t,e):h},e.autoItemWidth=function(t){return arguments.length?(g=t,e):g},e.legendText=function(t){return arguments.length?(p=t,e):p},e.maxItems=function(t){return arguments.length?(r=rt.utils.isNumber(t)?t:void 0,e):r},e},rt.htmlLegend=function(){var o,l,u,c,e={},s=rt.pluck("name"),d=!1,f=!1;return e.parent=function(t){return arguments.length?(o=t,e):o},e.render=function(){var t=d?"dc-legend-item-horizontal":"dc-legend-item-vertical";l.select("div.dc-html-legend").remove();var e=l.append("div").attr("class","dc-html-legend");e.attr("style","max-width:"+l.nodes()[0].style.width);var n=o.legendables(),r=o.filters();void 0!==u&&(n=n.slice(0,u));var i=c||t,a=e.selectAll("div."+i).data(n).enter().append("div").classed(i,!0).on("mouseover",o.legendHighlight).on("mouseout",o.legendReset).on("click",o.legendToggle);f&&a.classed(rt.constants.SELECTED_CLASS,function(t){return-1!==r.indexOf(t.name)}),a.append("span").attr("class","dc-legend-item-color").style("background-color",rt.pluck("color")),a.append("span").attr("class","dc-legend-item-label").attr("title",s).text(s)},e.container=function(t){return arguments.length?(l=nt.select(t),e):l},e.legendItemClass=function(t){return arguments.length?(c=t,e):c},e.highlightSelected=function(t){return arguments.length?(f=t,e):f},e.horizontal=function(t){return arguments.length?(d=t,e):d},e.legendText=function(t){return arguments.length?(s=t,e):s},e.maxItems=function(t){return arguments.length?(u=rt.utils.isNumber(t)?t:void 0,e):u},e},rt.scatterPlot=function(t,e){var i=rt.coordinateGridMixin({}),a=nt.symbol(),n=function(t){return t.value},r=i.keyAccessor();i.keyAccessor(function(t){return r(t)[0]}),i.valueAccessor(function(t){return r(t)[1]}),i.colorAccessor(function(){return i._groupName}),i.title(function(t){return i.keyAccessor()(t)+","+i.valueAccessor()(t)+": "+i.existenceAccessor()(t)});var o=function(t){return"translate("+i.x()(i.keyAccessor()(t))+","+i.y()(i.valueAccessor()(t))+")"},l=7,u=5,c=3,s=null,d=1,f=0,h=0,g=1,p=null,y=[];function m(t,e){return n(t)?y[e]?Math.pow(u,2):Math.pow(c,2):Math.pow(f,2)}function v(t,e){i.renderTitle()&&(t.selectAll("title").remove(),t.append("title").text(function(t){return i.title()(t)}))}function x(t,e){var n=i.chartBodyG().selectAll(".chart-body path.symbol").filter(function(){return t(nt.select(this))}),r=a.size();a.size(Math.pow(e,2)),rt.transition(n,i.transitionDuration(),i.transitionDelay()).attr("d",a),a.size(r)}return i.brush(nt.brush()),a.size(m),rt.override(i,"_filter",function(t){return arguments.length?i.__filter(rt.filters.RangedTwoDimensionalFilter(t)):i.__filter()}),i.plotData=function(){var t=i.chartBodyG().selectAll("path.symbol").data(i.data());rt.transition(t.exit(),i.transitionDuration(),i.transitionDelay()).attr("opacity",0).remove(),(t=t.enter().append("path").attr("class","symbol").attr("opacity",0).attr("fill",i.getColor).attr("transform",o).merge(t)).call(v,i.data()),t.each(function(t,e){y[e]=!i.filter()||i.filter().isFiltered([i.keyAccessor()(t),i.valueAccessor()(t)])}),rt.transition(t,i.transitionDuration(),i.transitionDelay()).attr("opacity",function(t,e){return n(t)?y[e]?g:i.excludedOpacity():h}).attr("fill",function(t,e){return p&&!n(t)?p:i.excludedColor()&&!y[e]?i.excludedColor():i.getColor(t)}).attr("transform",o).attr("d",a)},i.existenceAccessor=function(t){return arguments.length?(n=t,this):n},i.symbol=function(t){return arguments.length?(a.type(t),i):a.type()},i.customSymbol=function(t){return arguments.length?((a=t).size(m),i):a},i.symbolSize=function(t){return arguments.length?(u=t,i):u},i.highlightedSize=function(t){return arguments.length?(l=t,i):l},i.excludedSize=function(t){return arguments.length?(c=t,i):c},i.excludedColor=function(t){return arguments.length?(s=t,i):s},i.excludedOpacity=function(t){return arguments.length?(d=t,i):d},i.hiddenSize=i.emptySize=function(t){return arguments.length?(f=t,i):f},i.emptyColor=function(t){return arguments.length?(p=t,i):p},i.emptyOpacity=function(t){return arguments.length?(h=t,i):h},i.nonemptyOpacity=function(t){return arguments.length?(g=t,i):h},i.legendables=function(){return[{chart:i,name:i._groupName,color:i.getColor()}]},i.legendHighlight=function(e){x(function(t){return t.attr("fill")===e.color},l),i.chartBodyG().selectAll(".chart-body path.symbol").filter(function(){return nt.select(this).attr("fill")!==e.color}).classed("fadeout",!0)},i.legendReset=function(e){x(function(t){return t.attr("fill")===e.color},u),i.chartBodyG().selectAll(".chart-body path.symbol").filter(function(){return nt.select(this).attr("fill")!==e.color}).classed("fadeout",!1)},i.createBrushHandlePaths=function(){},i.extendBrush=function(t){return i.round()&&(t[0]=t[0].map(i.round()),t[1]=t[1].map(i.round())),t},i.brushIsEmpty=function(t){return!t||t[0][0]>=t[1][0]||t[0][1]>=t[1][1]},i._brushing=function(){if(nt.event.sourceEvent&&(!nt.event.sourceEvent.type||-1===["start","brush","end"].indexOf(nt.event.sourceEvent.type))){var t=nt.event.selection,e=i.brushIsEmpty(t);t&&(t=t.map(function(t){return t.map(function(t,e){return(0===e?i.x():i.y()).invert(t)})}),t=i.extendBrush(t),e=e&&i.brushIsEmpty(t)),i.redrawBrush(t,!1);var n=e?null:rt.filters.RangedTwoDimensionalFilter(t);rt.events.trigger(function(){i.replaceFilter(n),i.redrawGroup()},rt.constants.EVENT_DELAY)}},i.redrawBrush=function(t,e){var n=i.brush(),r=i.gBrush();i.brushOn()&&r&&(i.resizing()&&i.setBrushExtents(e),t?(t=t.map(function(t){return t.map(function(t,e){return(0===e?i.x():i.y())(t)})}),rt.optionalTransition(e,i.transitionDuration(),i.transitionDelay())(r).call(n.move,t)):r.call(n.move,t));i.fadeDeselectedArea(t)},i.setBrushY=function(t){t.call(i.brush().y(i.y()))},i.anchor(t,e)},rt.numberDisplay=function(t,e){var n,r="number-display",i=nt.format(".2s"),o=rt.baseMixin({}),l={one:"",some:"",none:""};return o._mandatoryAttributes(["group"]),o.ordering(function(t){return t.value}),o.html=function(t){return arguments.length?(t.none?l.none=t.none:t.one?l.none=t.one:t.some&&(l.none=t.some),t.one?l.one=t.one:t.some&&(l.one=t.some),t.some?l.some=t.some:t.one&&(l.some=t.one),o):l},o.value=function(){return o.data()},o.data(function(t){var e=t.value?t.value():function(t){if(!t.length)return null;var e=o._computeOrderedGroups(t);return e[e.length-1]}(t.all());return o.valueAccessor()(e)}),o.transitionDuration(250),o.transitionDelay(0),o._doRender=function(){var a=o.value(),t=o.selectAll("."+r);t.empty()&&(t=t.data([0]).enter().append("span").attr("class",r).merge(t)),t.transition().duration(o.transitionDuration()).delay(o.transitionDelay()).ease(nt.easeQuad).tween("text",function(){var t=isFinite(n)?n:0,r=nt.interpolateNumber(t||0,a);n=a;var i=this;return function(t){var e=null,n=o.formatNumber()(r(t));0===a&&""!==l.none?e=l.none:1===a&&""!==l.one?e=l.one:""!==l.some&&(e=l.some),i.innerHTML=e?e.replace("%number",n):n}})},o._doRedraw=function(){return o._doRender()},o.formatNumber=function(t){return arguments.length?(i=t,o):i},o.anchor(t,e)},rt.heatMap=function(t,e){var h,n,r,g=nt.ascending,p=nt.ascending,y=nt.scaleBand(),m=nt.scaleBand(),v=6.75,x=6.75,A=rt.colorMixin(rt.marginMixin(rt.baseMixin({})));A._mandatoryAttributes(["group"]),A.title(A.colorAccessor());var i=function(t){return t},a=function(t){return t};A.colsLabel=function(t){return arguments.length?(i=t,A):i},A.rowsLabel=function(t){return arguments.length?(a=t,A):a};var o=function(t){c(0,t)},l=function(t){c(1,t)},u=function(t){var e=t.key;rt.events.trigger(function(){A.filter(rt.filters.TwoDimensionalFilter(e)),A.redrawGroup()})};function c(e,n){var r=A.selectAll(".box-group").filter(function(t){return t.key[e]===n}),i=r.filter(function(t){return!A.hasFilter(t.key)});rt.events.trigger(function(){var t=(i.empty()?r:i).data().map(function(t){return rt.filters.TwoDimensionalFilter(t.key)});A.filter([t]),A.redrawGroup()})}var s=rt.logger.deprecate(function(t){return A._filter(rt.filters.TwoDimensionalFilter(t))},"heatmap.filter taking a coordinate is deprecated - please pass dc.filters.TwoDimensionalFilter instead");return rt.override(A,"filter",function(t){return arguments.length?null===t||"TwoDimensionalFilter"===t.filterType||Array.isArray(t)&&Array.isArray(t[0])&&"TwoDimensionalFilter"===t[0][0].filterType?A._filter(t):s(t):A._filter()}),A.rows=function(t){return arguments.length?(r=t,A):r},A.rowOrdering=function(t){return arguments.length?(p=t,A):p},A.cols=function(t){return arguments.length?(n=t,A):n},A.colOrdering=function(t){return arguments.length?(g=t,A):g},A._doRender=function(){return A.resetSvg(),h=A.svg().append("g").attr("class","heatmap").attr("transform","translate("+A.margins().left+","+A.margins().top+")"),A._doRedraw()},A._doRedraw=function(){var t=A.data(),n=A.rows()||t.map(A.valueAccessor()),r=A.cols()||t.map(A.keyAccessor());p&&(n=n.sort(p)),g&&(r=r.sort(g)),n=m.domain(n),r=y.domain(r);var e=n.domain().length,i=r.domain().length,a=Math.floor(A.effectiveWidth()/i),o=Math.floor(A.effectiveHeight()/e);r.rangeRound([0,A.effectiveWidth()]),n.rangeRound([A.effectiveHeight(),0]);var l=h.selectAll("g.box-group").data(A.data(),function(t,e){return A.keyAccessor()(t,e)+"\0"+A.valueAccessor()(t,e)});l.exit().remove();var u=l.enter().append("g").attr("class","box-group");u.append("rect").attr("class","heat-box").attr("fill","white").attr("x",function(t,e){return r(A.keyAccessor()(t,e))}).attr("y",function(t,e){return n(A.valueAccessor()(t,e))}).on("click",A.boxOnClick()),l=u.merge(l),A.renderTitle()&&(u.append("title"),l.select("title").text(A.title())),rt.transition(l.select("rect"),A.transitionDuration(),A.transitionDelay()).attr("x",function(t,e){return r(A.keyAccessor()(t,e))}).attr("y",function(t,e){return n(A.valueAccessor()(t,e))}).attr("rx",v).attr("ry",x).attr("fill",A.getColor).attr("width",a).attr("height",o);var c=h.select("g.cols");c.empty()&&(c=h.append("g").attr("class","cols axis"));var s=c.selectAll("text").data(r.domain());s.exit().remove(),s=s.enter().append("text").attr("x",function(t){return r(t)+a/2}).style("text-anchor","middle").attr("y",A.effectiveHeight()).attr("dy",12).on("click",A.xAxisOnClick()).text(A.colsLabel()).merge(s),rt.transition(s,A.transitionDuration(),A.transitionDelay()).text(A.colsLabel()).attr("x",function(t){return r(t)+a/2}).attr("y",A.effectiveHeight());var d=h.select("g.rows");d.empty()&&(d=h.append("g").attr("class","rows axis"));var f=d.selectAll("text").data(n.domain());return f.exit().remove(),f=f.enter().append("text").style("text-anchor","end").attr("x",0).attr("dx",-2).attr("y",function(t){return n(t)+o/2}).attr("dy",6).on("click",A.yAxisOnClick()).text(A.rowsLabel()).merge(f),rt.transition(f,A.transitionDuration(),A.transitionDelay()).text(A.rowsLabel()).attr("y",function(t){return n(t)+o/2}),A.hasFilter()?A.selectAll("g.box-group").each(function(t){A.isSelectedNode(t)?A.highlightSelected(this):A.fadeDeselected(this)}):A.selectAll("g.box-group").each(function(){A.resetHighlight(this)}),A},A.boxOnClick=function(t){return arguments.length?(u=t,A):u},A.xAxisOnClick=function(t){return arguments.length?(o=t,A):o},A.yAxisOnClick=function(t){return arguments.length?(l=t,A):l},A.xBorderRadius=function(t){return arguments.length?(v=t,A):v},A.yBorderRadius=function(t){return arguments.length?(x=t,A):x},A.isSelectedNode=function(t){return A.hasFilter(t.key)},A.anchor(t,e)},function(){function t(t){return[0,t.length-1]}function n(t){return[nt.quantile(t,.25),nt.quantile(t,.5),nt.quantile(t,.75)]}nt.box=function(){var w=1,C=1,L=0,S=null,E=Number,R=t,M=n,O=null,T=!1,B=.3,F=.8,N=!1,H=!0,G=!1;function e(t){t.each(function(e,t){e=e.map(E).sort(nt.ascending);var n,r,i=nt.select(this),a=e.length;if(0!==a){var o=e.quartiles=M(e),l=R&&R.call(this,e,t),u=l&&l.map(function(t){return e[t]}),c=l?nt.range(0,l[0]).concat(nt.range(l[1]+1,a)):nt.range(a);r=H?(n=e[0],e[a-1]):(n=e[l[0]],e[l[1]]);var s=nt.range(l[0],l[1]+1),d=nt.scaleLinear().domain(S&&S.call(this,e,t)||[n,r]).range([C,0]),f=this.__chart__||nt.scaleLinear().domain([0,1/0]).range(d.range());this.__chart__=d;var h=i.selectAll("line.center").data(u?[u]:[]);h.enter().insert("line","rect").attr("class","center").attr("x1",w/2).attr("y1",function(t){return f(t[0])}).attr("x2",w/2).attr("y2",function(t){return f(t[1])}).style("opacity",1e-6).transition().duration(L).delay(0).style("opacity",1).attr("y1",function(t){return d(t[0])}).attr("y2",function(t){return d(t[1])}),h.transition().duration(L).delay(0).style("opacity",1).attr("x1",w/2).attr("x2",w/2).attr("y1",function(t){return d(t[0])}).attr("y2",function(t){return d(t[1])}),h.exit().transition().duration(L).delay(0).style("opacity",1e-6).attr("y1",function(t){return d(t[0])}).attr("y2",function(t){return d(t[1])}).remove();var g=i.selectAll("rect.box").data([o]);g.enter().append("rect").attr("class","box").attr("x",0).attr("y",function(t){return f(t[2])}).attr("width",w).attr("height",function(t){return f(t[0])-f(t[2])}).style("fill-opacity",T?.1:1).transition().duration(L).delay(0).attr("y",function(t){return d(t[2])}).attr("height",function(t){return d(t[0])-d(t[2])}),g.transition().duration(L).delay(0).attr("width",w).attr("y",function(t){return d(t[2])}).attr("height",function(t){return d(t[0])-d(t[2])});var p=i.selectAll("line.median").data([o[1]]);p.enter().append("line").attr("class","median").attr("x1",0).attr("y1",f).attr("x2",w).attr("y2",f).transition().duration(L).delay(0).attr("y1",d).attr("y2",d),p.transition().duration(L).delay(0).attr("x1",0).attr("x2",w).attr("y1",d).attr("y2",d);var y=i.selectAll("line.whisker").data(u||[]);if(y.enter().insert("line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",f).attr("x2",w).attr("y2",f).style("opacity",1e-6).transition().duration(L).delay(0).attr("y1",d).attr("y2",d).style("opacity",1),y.transition().duration(L).delay(0).attr("x1",0).attr("x2",w).attr("y1",d).attr("y2",d).style("opacity",1),y.exit().transition().duration(L).delay(0).attr("y1",d).attr("y2",d).style("opacity",1e-6).remove(),H){var m=G?"outlierBold":"outlier",v=G?3:5,x=G?function(){return Math.floor(Math.random()*(w*F)+1+(w-w*F)/2)}:function(){return w/2},A=i.selectAll("circle."+m).data(c,Number);A.enter().insert("circle","text").attr("class",m).attr("r",v).attr("cx",x).attr("cy",function(t){return f(e[t])}).style("opacity",1e-6).transition().duration(L).delay(0).attr("cy",function(t){return d(e[t])}).style("opacity",.6),N&&(A.selectAll("title").remove(),A.append("title").text(function(t){return e[t]})),A.transition().duration(L).delay(0).attr("cx",x).attr("cy",function(t){return d(e[t])}).style("opacity",.6),A.exit().transition().duration(L).delay(0).attr("cy",0).style("opacity",1e-6).remove()}if(T){var b=i.selectAll("circle.data").data(s);b.enter().insert("circle","text").attr("class","data").attr("r",3).attr("cx",function(){return Math.floor(Math.random()*(w*F)+1+(w-w*F)/2)}).attr("cy",function(t){return f(e[t])}).style("opacity",1e-6).transition().duration(L).delay(0).attr("cy",function(t){return d(e[t])}).style("opacity",B),N&&(b.selectAll("title").remove(),b.append("title").text(function(t){return e[t]})),b.transition().duration(L).delay(0).attr("cx",function(){return Math.floor(Math.random()*(w*F)+1+(w-w*F)/2)}).attr("cy",function(t){return d(e[t])}).style("opacity",B),b.exit().transition().duration(L).delay(0).attr("cy",0).style("opacity",1e-6).remove()}var _=O||d.tickFormat(8),k=i.selectAll("text.box").data(o);k.enter().append("text").attr("class","box").attr("dy",".3em").attr("dx",function(t,e){return 1&e?6:-6}).attr("x",function(t,e){return 1&e?w:0}).attr("y",f).attr("text-anchor",function(t,e){return 1&e?"start":"end"}).text(_).transition().duration(L).delay(0).attr("y",d),k.transition().duration(L).delay(0).text(_).attr("x",function(t,e){return 1&e?w:0}).attr("y",d);var D=i.selectAll("text.whisker").data(u||[]);D.enter().append("text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",w).attr("y",f).text(_).style("opacity",1e-6).transition().duration(L).delay(0).attr("y",d).style("opacity",1),D.transition().duration(L).delay(0).text(_).attr("x",w).attr("y",d).style("opacity",1),D.exit().transition().duration(L).delay(0).attr("y",d).style("opacity",1e-6).remove(),delete e.quartiles}}),nt.timerFlush()}return e.width=function(t){return arguments.length?(w=t,e):w},e.height=function(t){return arguments.length?(C=t,e):C},e.tickFormat=function(t){return arguments.length?(O=t,e):O},e.showOutliers=function(t){return arguments.length?(H=t,e):H},e.boldOutlier=function(t){return arguments.length?(G=t,e):G},e.renderDataPoints=function(t){return arguments.length?(T=t,e):T},e.renderTitle=function(t){return arguments.length?(N=t,e):N},e.dataOpacity=function(t){return arguments.length?(B=t,e):B},e.dataWidthPortion=function(t){return arguments.length?(F=t,e):F},e.duration=function(t){return arguments.length?(L=t,e):L},e.domain=function(t){return arguments.length?(S=null===t?t:"function"==typeof t?t:rt.utils.constant(t),e):S},e.value=function(t){return arguments.length?(E=t,e):E},e.whiskers=function(t){return arguments.length?(R=t,e):R},e.quartiles=function(t){return arguments.length?(M=t,e):M},e}}(),rt.boxPlot=function(t,e){var o=rt.coordinateGridMixin({});var l=function(o){return function(t){for(var e=t.quartiles[0],n=t.quartiles[2],r=(n-e)*o,i=-1,a=t.length;t[++i]<e-r;);for(;t[--a]>n+r;);return[i,a]}}(1.5),u=nt.box(),c=null,s=!1,d=.3,f=.8,h=!0,g=!1,n=8,p=function(t,e){return o.isOrdinal()?o.x().bandwidth():t/(1+o.boxPadding())/e};o.x(nt.scaleBand()),o.xUnits(rt.units.ordinal),o.data(function(t){return t.all().map(function(e){return e.map=function(t){return t.call(e,e)},e}).filter(function(t){return 0!==o.valueAccessor()(t).length})}),o.boxPadding=o._rangeBandPadding,o.boxPadding(.8),o.outerPadding=o._outerRangeBandPadding,o.outerPadding(.5),o.boxWidth=function(t){return arguments.length?(p="function"==typeof t?t:rt.utils.constant(t),o):p};var y=function(t,e){return"translate("+o.x()(o.keyAccessor()(t,e))+", 0)"};function r(){return nt.min(o.data(),function(t){return nt.min(o.valueAccessor()(t))})}function i(){return nt.max(o.data(),function(t){return nt.max(o.valueAccessor()(t))})}function a(){return(i()-r())/o.effectiveHeight()}return o._preprocessData=function(){o.elasticX()&&o.x().domain([])},o.plotData=function(){var t=p(o.effectiveWidth(),o.xUnitCount());u.whiskers(l).width(t).height(o.effectiveHeight()).value(o.valueAccessor()).domain(o.y().domain()).duration(o.transitionDuration()).tickFormat(c).renderDataPoints(s).dataOpacity(d).dataWidthPortion(f).renderTitle(o.renderTitle()).showOutliers(h).boldOutlier(g);var e,n,r,i=o.chartBodyG().selectAll("g.box").data(o.data(),o.keyAccessor()),a=((n=(e=i).enter().append("g")).attr("class","box").attr("transform",y).call(u).on("click",function(t){o.filter(o.keyAccessor()(t)),o.redrawGroup()}),n.merge(e));r=a,rt.transition(r,o.transitionDuration(),o.transitionDelay()).attr("transform",y).call(u).each(function(t){var e=o.getColor(t,0);nt.select(this).select("rect.box").attr("fill",e),nt.select(this).selectAll("circle.data").attr("fill",e)}),i.exit().remove().call(u),o.fadeDeselectedArea(o.filter())},o.fadeDeselectedArea=function(t){if(o.hasFilter())if(o.isOrdinal())o.g().selectAll("g.box").each(function(t){o.isSelectedNode(t)?o.highlightSelected(this):o.fadeDeselected(this)});else{if(!o.brushOn()&&!o.parentBrushOn())return;var n=t[0],r=t[1],i=o.keyAccessor();o.g().selectAll("g.box").each(function(t){var e=i(t);e<n||r<=e?o.fadeDeselected(this):o.highlightSelected(this)})}else o.g().selectAll("g.box").each(function(){o.resetHighlight(this)})},o.isSelectedNode=function(t){return o.hasFilter(o.keyAccessor()(t))},o.yAxisMin=function(){var t=n*a();return rt.utils.subtract(r()-t,o.yAxisPadding())},o.yAxisMax=function(){var t=n*a();return rt.utils.add(i()+t,o.yAxisPadding())},o.tickFormat=function(t){return arguments.length?(c=t,o):c},o.yRangePadding=function(t){return arguments.length?(n=t,o):n},o.renderDataPoints=function(t){return arguments.length?(s=t,o):s},o.dataOpacity=function(t){return arguments.length?(d=t,o):d},o.dataWidthPortion=function(t){return arguments.length?(f=t,o):f},o.showOutliers=function(t){return arguments.length?(h=t,o):h},o.boldOutlier=function(t){return arguments.length?(g=t,o):g},o.anchor(t,e)},rt.selectMenu=function(t,e){var n,r="dc-select-option",i=rt.baseMixin({}),a="Select all",o=!1,l=null,u=null,c=function(t,e){return i.keyAccessor()(t)>i.keyAccessor()(e)?1:i.keyAccessor()(e)>i.keyAccessor()(t)?-1:0},s=function(t){return 0<i.valueAccessor()(t)};i.data(function(t){return t.all().filter(s)}),i._doRender=function(){return i.select("select").remove(),(n=i.root().append("select").classed("dc-select-menu",!0)).append("option").text(a).attr("value",""),i._doRedraw(),i};var d=window.navigator.userAgent;function f(t,e){var n,r=nt.event.target;r.selectedOptions?n=Array.prototype.slice.call(r.selectedOptions).map(function(t){return t.value}):n=[].slice.call(nt.event.target.options).filter(function(t){return t.selected}).map(function(t){return t.value});1===n.length&&""===n[0]?n=l||null:o||1!==n.length||(n=n[0]),i.onChange(n)}return 0<d.indexOf("Trident/")&&-1===d.indexOf("MSIE")&&(i.redraw=i.render),i._doRedraw=function(){var t;return function(){o?n.attr("multiple",!0):n.attr("multiple",null);null!==u?n.attr("size",u):n.attr("size",null)}(),(t=n.selectAll("option."+r).data(i.data(),function(t){return i.keyAccessor()(t)})).exit().remove(),t.enter().append("option").classed(r,!0).attr("value",function(t){return i.keyAccessor()(t)}).merge(t).text(i.title()),n.selectAll("option."+r).sort(c),n.on("change",f),i.hasFilter()&&o?n.selectAll("option").property("selected",function(t){return void 0!==t&&0<=i.filters().indexOf(String(i.keyAccessor()(t)))}):i.hasFilter()?n.property("value",i.filter()):n.property("value",""),i},i.onChange=function(t){t&&o?i.replaceFilter([t]):t?i.replaceFilter(t):i.filterAll(),rt.events.trigger(function(){i.redrawGroup()})},i.order=function(t){return arguments.length?(c=t,i):c},i.promptText=function(t){return arguments.length?(a=t,i):a},i.filterDisplayed=function(t){return arguments.length?(s=t,i):s},i.multiple=function(t){return arguments.length?(o=t,i):o},i.promptValue=function(t){return arguments.length?(l=t,i):l},i.numberVisible=function(t){return arguments.length?(u=t,i):u},i.size=rt.logger.deprecate(i.numberVisible,"selectMenu.size is ambiguous - use numberVisible instead"),i.anchor(t,e)},rt.textFilterWidget=function(t,e){var n=rt.baseMixin({}),r=function(t){return t.toLowerCase()},i=function(e){return e=r(e),function(t){return-1!==r(t).indexOf(e)}},a="search";return n.group(function(){throw"the group function on textFilterWidget should never be called, please report the issue"}),n._doRender=function(){return n.select("input").remove(),n.root().append("input").classed("dc-text-filter-input",!0).on("input",function(){n.dimension().filterFunction(i(this.value)),rt.events.trigger(function(){rt.redrawAll()},rt.constants.EVENT_DELAY)}),n._doRedraw(),n},n._doRedraw=function(){return n.root().selectAll("input").attr("placeholder",a),n},n.normalize=function(t){return arguments.length?(r=t,n):r},n.placeHolder=function(t){return arguments.length?(a=t,n):a},n.filterFunctionFactory=function(t){return arguments.length?(i=t,n):i},n.anchor(t,e)},rt.cboxMenu=function(t,e){var n,r="dc-cbox-item",i=rt.baseMixin({}),a="Select all",o=!1,l="radio",u=null,c=Math.floor(1e5*Math.random())+1,s=function(t,e){return i.keyAccessor()(t)>i.keyAccessor()(e)?1:i.keyAccessor()(e)>i.keyAccessor()(t)?-1:0},d=function(t){return 0<i.valueAccessor()(t)};function f(t,e){var n;nt.select(nt.event.target).datum()?(n=nt.select(this).selectAll("input").filter(function(t){if(t)return this.checked}).nodes().map(function(t){return t.value}),o||1!==n.length||(n=n[0])):n=u||null,i.onChange(n)}return i.data(function(t){return t.all().filter(d)}),i._doRender=function(){return i._doRedraw()},i._doRedraw=function(){return i.select("ul").remove(),n=i.root().append("ul").classed("dc-cbox-group",!0),function(){var t=n.selectAll("li."+r).data(i.data(),function(t){return i.keyAccessor()(t)});if(t.exit().remove(),(t=t.enter().append("li").classed(r,!0).merge(t)).append("input").attr("type",l).attr("value",function(t){return i.keyAccessor()(t)}).attr("name","domain_"+c).attr("id",function(t,e){return"input_"+c+"_"+e}),t.append("label").attr("for",function(t,e){return"input_"+c+"_"+e}).text(i.title()),o)n.append("li").append("input").attr("type","reset").text(a).on("click",f);else{var e=n.append("li");e.append("input").attr("type",l).attr("value",u).attr("name","domain_"+c).attr("id",function(t,e){return"input_"+c+"_all"}).property("checked",!0),e.append("label").attr("for",function(t,e){return"input_"+c+"_all"}).text(a)}n.selectAll("li."+r).sort(s),n.on("change",f)}(),i.hasFilter()&&o?n.selectAll("input").property("checked",function(t){return t&&0<=i.filters().indexOf(String(i.keyAccessor()(t)))||!1}):i.hasFilter()&&n.selectAll("input").property("checked",function(t){return!!t&&i.keyAccessor()(t)===i.filter()}),i},i.onChange=function(t){t&&o?i.replaceFilter([t]):t?i.replaceFilter(t):i.filterAll(),rt.events.trigger(function(){i.redrawGroup()})},i.order=function(t){return arguments.length?(s=t,i):s},i.promptText=function(t){return arguments.length?(a=t,i):a},i.filterDisplayed=function(t){return arguments.length?(d=t,i):d},i.multiple=function(t){return arguments.length?(l=(o=t)?"checkbox":"radio",i):o},i.promptValue=function(t){return arguments.length?(u=t,i):u},i.anchor(t,e)},rt.abstractBubbleChart=rt.bubbleMixin,rt.baseChart=rt.baseMixin,rt.capped=rt.capMixin,rt.colorChart=rt.colorMixin,rt.coordinateGridChart=rt.coordinateGridMixin,rt.marginable=rt.marginMixin,rt.stackableChart=rt.stackMixin,rt.d3=nt,rt.crossfilter=V,rt}if("function"==typeof define&&define.amd)define(["d3","crossfilter2"],t);else if("object"==typeof module&&module.exports){var e=require("d3"),n=require("crossfilter2");"function"!=typeof n&&(n=n.crossfilter),module.exports=t(e,n)}else this.dc=t(d3,crossfilter)}();
//# sourceMappingURL=dc.min.js.map